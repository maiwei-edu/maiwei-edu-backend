import{u as h,b as y,r as n,t as j,j as e,S as k,E as C,m as b,M as E}from"./index-b4683d61.js";import{c as S,a as v}from"./wenda-cd02147f.js";import{B as w}from"./index-5f967da4.js";import{P as r}from"./index-573a6ce5.js";import{T as B}from"./Table-76e623b5.js";import"./LeftOutlined-9e6e73a2.js";import"./addEventListener-a27ae3f4.js";import"./useIcons-e0af7133.js";import"./CheckOutlined-e6bc730e.js";import"./Pagination-d2c763c6.js";import"./useForceUpdate-f2aff5e0.js";import"./responsiveObserver-dc429d3b.js";import"./index-c09cc6d7.js";import"./index-10f1a096.js";import"./iconUtil-f3f90360.js";const{confirm:N}=E,G=()=>{const d=h(),i=y(),[o,a]=n.useState(!1),[m,c]=n.useState([]),[l,p]=n.useState(!1);n.useEffect(()=>{document.title="问答分类",d(j("问答分类"))},[]),n.useEffect(()=>{u()},[l]);const u=()=>{o||(a(!0),S().then(t=>{c(t.data.data),a(!1)}).catch(t=>{a(!1)}))},f=()=>{c([]),p(!l)},x=[{title:"排序",width:120,render:(t,s)=>e.jsx("span",{children:s.sort})},{title:"分类名",dataIndex:"name",render:t=>e.jsx("span",{children:t})},{title:"操作",width:130,render:(t,s)=>e.jsxs(k,{children:[e.jsx(r,{type:"link",text:"编辑",class:"c-primary",icon:null,p:"addons.Wenda.category.update",onClick:()=>{i("/wenda/question/category/update?id="+s.id)},disabled:null}),e.jsx(r,{type:"link",text:"删除",class:"c-red",icon:null,p:"addons.Wenda.category.delete",onClick:()=>{g(s.id)},disabled:null})]})}],g=t=>{t!==0&&N({title:"操作确认",icon:e.jsx(C,{}),content:"确认删除此分类？",centered:!0,okText:"确认",cancelText:"取消",onOk(){o||(a(!0),v(t).then(()=>{a(!1),b.success("删除成功"),f()}).catch(s=>{a(!1)}))},onCancel(){console.log("Cancel")}})};return e.jsxs("div",{className:"meedu-main-body",children:[e.jsx(w,{title:"问答分类"}),e.jsx("div",{className:"float-left mb-30 mt-30",children:e.jsx(r,{type:"primary",text:"新建问答分类",class:"",icon:null,p:"addons.Wenda.category.store",onClick:()=>i("/wenda/question/category/create"),disabled:null})}),e.jsx("div",{className:"float-left",children:e.jsx(B,{loading:o,columns:x,dataSource:m,rowKey:t=>t.id,pagination:!1})})]})};export{G as default};
