import{u as _,b as I,r,t as F,j as e,B as d,I as o,S as h,m as N}from"./index-b4683d61.js";import{s as q}from"./multi-share-e6afeacd.js";import{B}from"./index-5f967da4.js";import{H as x}from"./index-133d6e1c.js";import{U as R}from"./index-4432445b.js";import{S as k}from"./index-ea4492e3.js";import{F as s}from"./index-d434f3eb.js";import{R as T,C as g}from"./row-4ee18533.js";import"./LeftOutlined-9e6e73a2.js";import"./InfoCircleOutlined-4d24221b.js";import"./InboxOutlined-1c6772bb.js";import"./selected-177ec16c.js";import"./Dragger-1df363a5.js";import"./useForceUpdate-f2aff5e0.js";import"./DeleteOutlined-8e7e99fd.js";import"./CheckOutlined-e6bc730e.js";import"./useIcons-e0af7133.js";import"./Pagination-d2c763c6.js";import"./responsiveObserver-dc429d3b.js";import"./index-c09cc6d7.js";import"./course-7dc1c12e.js";import"./Table-76e623b5.js";import"./addEventListener-a27ae3f4.js";import"./index-10f1a096.js";import"./iconUtil-f3f90360.js";import"./live-ef2dd82c.js";import"./role-513b287e.js";import"./book-a8b4ca06.js";import"./path-6d6aef48.js";import"./topic-842c58e2.js";import"./paper-7f0d6524.js";import"./practice-e65e37d7.js";import"./mock-274446b7.js";import"./index-d198db66.js";import"./PlusOutlined-c97c4cac.js";const xe=()=>{const[a]=s.useForm(),j=_(),c=I(),[i,l]=r.useState(!1),[p,u]=r.useState(""),[m,b]=r.useState(""),[f,y]=r.useState(""),[w,n]=r.useState(!1);r.useEffect(()=>{document.title="新建分销活动",j(F("新建分销活动"))},[]);const S=t=>{i||(l(!0),t.goods_type=f,q(t).then(v=>{l(!1),N.success("保存成功！"),c(-1)}).catch(v=>{l(!1)}))},C=t=>{console.log("Failed:",t)};return e.jsxs("div",{className:"meedu-main-body",children:[e.jsx(B,{title:"新建分销活动"}),e.jsx(k,{open:w,enabledResource:"vod,live,book,topic,paper,practice,learnPath,vip",onCancel:()=>n(!1),onSelected:t=>{a.setFieldsValue({goods_id:t.id,goods_title:t.title,goods_charge:t.original_charge,goods_thumb:t.thumb}),b(t.title),u(t.thumb),y(t.resource_type),n(!1)}}),e.jsx("div",{className:"float-left mt-30",children:e.jsxs(s,{form:a,name:"multiShare-create",labelCol:{span:3},wrapperCol:{span:21},initialValues:{remember:!0},onFinish:S,onFinishFailed:C,autoComplete:"off",children:[e.jsx(s.Item,{label:"课程",name:"goods_id",rules:[{required:!0,message:"请选择课程!"}],children:e.jsxs(d,{loading:i,type:"primary",onClick:()=>n(!0),children:[m&&e.jsxs("span",{children:["已选择课程「",m,"」"]}),!m&&e.jsx("span",{children:"选择课程"})]})}),e.jsx(s.Item,{label:"商品名",name:"goods_title",rules:[{required:!0,message:"请输入商品名!"}],children:e.jsx(o,{style:{width:300},placeholder:"请输入商品名",allowClear:!0})}),e.jsx(s.Item,{label:"商品价格",name:"goods_charge",rules:[{required:!0,message:"请输入商品价格!"}],children:e.jsx(o,{type:"number",style:{width:300},placeholder:"单位：元",allowClear:!0})}),e.jsx(s.Item,{label:"商品封面",name:"goods_thumb",rules:[{required:!0,message:"请上传商品封面!"}],children:e.jsx(R,{text:"上传图片",onSelected:t=>{a.setFieldsValue({goods_thumb:t}),u(t)}})}),p&&e.jsxs(T,{style:{marginBottom:22},children:[e.jsx(g,{span:3}),e.jsx(g,{span:21,children:e.jsx("div",{className:"normal-thumb-box",style:{backgroundImage:`url(${p})`,width:120,height:90}})})]}),e.jsx(s.Item,{label:"一级奖励",name:"reward",rules:[{required:!0,message:"请输入一级分销奖励!"}],children:e.jsxs(h,{align:"baseline",style:{height:32},children:[e.jsx(s.Item,{name:"reward",rules:[{required:!0,message:"请输入一级分销奖励!"}],children:e.jsx(o,{style:{width:300},placeholder:"请输入一级分销奖励",allowClear:!0,type:"number"})}),e.jsx("div",{className:"ml-10",children:e.jsx(x,{text:"最小单位：元。不支持小数。"})})]})}),e.jsx(s.Item,{label:"二级奖励",name:"reward2",rules:[{required:!0,message:"请输入二级分销奖励!"}],children:e.jsxs(h,{align:"baseline",style:{height:32},children:[e.jsx(s.Item,{name:"reward2",rules:[{required:!0,message:"请输入二级分销奖励!"}],children:e.jsx(o,{style:{width:300},placeholder:"请输入二级分销奖励",allowClear:!0,type:"number"})}),e.jsx("div",{className:"ml-10",children:e.jsx(x,{text:"最小单位：元。不支持小数。"})})]})})]})}),e.jsx("div",{className:"bottom-menus",children:e.jsxs("div",{className:"bottom-menus-box",children:[e.jsx("div",{children:e.jsx(d,{loading:i,type:"primary",onClick:()=>a.submit(),children:"保存"})}),e.jsx("div",{className:"ml-24",children:e.jsx(d,{type:"default",onClick:()=>c(-1),children:"取消"})})]})})]})};export{xe as default};
