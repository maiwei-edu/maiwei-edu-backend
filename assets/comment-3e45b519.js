import{f as w,u as _,r as a,t as N,j as e,d as v,E as b,m as S,M as k}from"./index-b4683d61.js";import{h as C,i as E}from"./wenda-cd02147f.js";import{B as I}from"./index-5f967da4.js";import{P as y}from"./index-573a6ce5.js";import{T as D}from"./Table-76e623b5.js";import"./LeftOutlined-9e6e73a2.js";import"./addEventListener-a27ae3f4.js";import"./useIcons-e0af7133.js";import"./CheckOutlined-e6bc730e.js";import"./Pagination-d2c763c6.js";import"./useForceUpdate-f2aff5e0.js";import"./responsiveObserver-dc429d3b.js";import"./index-c09cc6d7.js";import"./index-10f1a096.js";import"./iconUtil-f3f90360.js";const{confirm:B}=k,Q=()=>{const r=new URLSearchParams(w().search),c=_(),[i,n]=a.useState(!1),[l,d]=a.useState([]),[o,m]=a.useState(!1),[L,u]=a.useState(Number(r.get("id"))),[h,f]=a.useState(Number(r.get("answer_id")));a.useEffect(()=>{document.title="问题评论",c(N("问题评论"))},[]),a.useEffect(()=>{u(Number(r.get("id"))),f(Number(r.get("answer_id"))),p()},[r.get("id"),r.get("answer_id"),o]);const p=()=>{i||(n(!0),C(h).then(t=>{d(t.data.comments),n(!1)}).catch(t=>{n(!1)}))},x=()=>{d([]),m(!o)},j=[{title:"ID",width:120,render:(t,s)=>e.jsx("span",{children:s.id})},{title:"学员ID",width:120,dataIndex:"user_id",render:t=>e.jsx("span",{children:t})},{title:"学员",width:300,render:(t,s)=>e.jsxs(e.Fragment,{children:[s.user&&e.jsxs("div",{className:"user-item d-flex",children:[e.jsx("div",{className:"avatar",children:e.jsx("img",{src:s.user.avatar,width:"40",height:"40"})}),e.jsx("div",{className:"ml-10",children:s.user.nick_name})]}),!s.user&&e.jsx("span",{className:"c-red",children:"学员不存在"})]})},{title:"内容",width:500,render:(t,s)=>e.jsx("div",{children:s.original_content})},{title:"时间",width:200,dataIndex:"created_at",render:t=>e.jsx("span",{children:v(t)})},{title:"操作",width:100,render:(t,s)=>e.jsx(y,{type:"link",text:"删除",class:"c-red",icon:null,p:"addons.Wenda.question.answers.comments.delete",onClick:()=>{g(s.id)},disabled:null})}],g=t=>{t!==0&&B({title:"操作确认",icon:e.jsx(b,{}),content:"确认删除此评论？",centered:!0,okText:"确认",cancelText:"取消",onOk(){i||(n(!0),E(t).then(()=>{n(!1),S.success("删除成功"),x()}).catch(s=>{n(!1)}))},onCancel(){console.log("Cancel")}})};return e.jsxs("div",{className:"meedu-main-body",children:[e.jsx(I,{title:"问题评论"}),e.jsx("div",{className:"float-left mt-30",children:e.jsx(D,{loading:i,columns:j,dataSource:l,rowKey:t=>t.id,pagination:!1})})]})};export{Q as default};
