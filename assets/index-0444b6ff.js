import{u as v,b as E,r as a,t as N,j as t,B as c,S as T,E as b,m as z,M as P}from"./index-b4683d61.js";import{l as D,d as I}from"./singlepage-b3959a6e.js";import{T as _}from"./Table-76e623b5.js";import"./addEventListener-a27ae3f4.js";import"./useIcons-e0af7133.js";import"./CheckOutlined-e6bc730e.js";import"./Pagination-d2c763c6.js";import"./LeftOutlined-9e6e73a2.js";import"./useForceUpdate-f2aff5e0.js";import"./responsiveObserver-dc429d3b.js";import"./index-c09cc6d7.js";import"./index-10f1a096.js";import"./iconUtil-f3f90360.js";const{confirm:B}=P,V=()=>{const u=v(),l=E(),[i,n]=a.useState(!1),[h,d]=a.useState([]),[r,p]=a.useState(1),[o,f]=a.useState(10),[g,L]=a.useState(0),[m,x]=a.useState(!1);a.useEffect(()=>{document.title="单页面",u(N("单页面"))},[]),a.useEffect(()=>{j()},[r,o,m]);const j=()=>{i||(n(!0),D({page:r,size:o}).then(e=>{d(e.data.data),n(!1)}).catch(e=>{n(!1)}))},S=[{title:"唯一标识",width:150,render:(e,s)=>t.jsx("span",{children:s.sign})},{title:"标题",width:280,dataIndex:"title",render:e=>t.jsx("span",{children:e})},{title:"地址",dataIndex:"url",render:e=>t.jsx("span",{children:e})},{title:"浏览次数",width:150,dataIndex:"view_times",render:e=>t.jsxs("span",{children:[e,"次"]})},{title:"操作",width:120,render:(e,s)=>t.jsxs(T,{children:[t.jsx(c,{type:"link",className:"c-primary",onClick:()=>{l("/singlepage/update?id="+s.id)},children:"编辑"}),t.jsx(c,{type:"link",className:"c-red",onClick:()=>{C(s.id)},children:"删除"})]})}],y=()=>{p(1),d([]),x(!m)},C=e=>{e!==0&&B({title:"操作确认",icon:t.jsx(b,{}),content:"确认删除此页面？",centered:!0,okText:"确认",cancelText:"取消",onOk(){i||(n(!0),I(e).then(()=>{n(!1),z.success("删除成功"),y()}).catch(s=>{n(!1)}))},onCancel(){console.log("Cancel")}})},k={current:r,pageSize:o,total:g,onChange:(e,s)=>w(e,s),showSizeChanger:!0},w=(e,s)=>{p(e),f(s)};return t.jsxs("div",{className:"meedu-main-body",children:[t.jsx("div",{className:"float-left mb-30",children:t.jsx(c,{type:"primary",onClick:()=>l("/singlepage/create"),children:"添加"})}),t.jsx("div",{className:"float-left",children:t.jsx(_,{loading:i,columns:S,dataSource:h,rowKey:e=>e.id,pagination:k})})]})};export{V as default};
