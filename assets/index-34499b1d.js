import{c as A,r as i,u as T,a as v,t as Y,j as e,L as _,B as M}from"./index-b4683d61.js";import{i as k}from"./index-305edcd4.js";import{D as E}from"./index-cc7d88a3.js";function q(){return A.get("/backend/api/v1/dashboard",{})}function S(){return A.get("/backend/api/v1/dashboard/system/info",{})}function U(o){return A.get("/backend/api/v1/dashboard/graph",o)}const z="_el_content_186np_1",C="_el_top_row1_186np_9",H="_el_row_item_186np_16",I="_item_title_186np_30",J="_item_info_186np_52",Z="_el_row_item2_186np_75",W="_el_item_186np_83",K="_el_item_num_186np_110",Q="_el_item_increase_186np_121",$="_el_top_row2_186np_127",ee="_tit_186np_144",te="_el_row2_item_186np_154",se="_el_top_row3_186np_176",ne="_selchartbox_186np_199",ae="_selcharttimebox_186np_206",ie="_charts_186np_213",re="_copyright_186np_218",oe="_info_186np_233",n={el_content:z,el_top_row1:C,el_row_item:H,item_title:I,item_info:J,el_row_item2:Z,el_item:W,el_item_num:K,el_item_increase:Q,el_top_row2:$,tit:ee,el_row2_item:te,el_top_row3:se,selchartbox:ne,selcharttimebox:ae,charts:ie,copyright:re,info:oe},ce="/assets/demand-49ff5fca.png",de="data:image/png;base64,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",le="/assets/tuwen-cee83f9a.png",_e="/assets/ebook-df2e529f.png",me="/assets/course-f53cf004.png",pe="/assets/testpaper-a8107e4e.png",{RangePicker:ue}=E,xe=o=>{let p="",s=new Date,c=new Date(s);return c.setDate(s.getDate()+o),p=c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate(),p},we=()=>{let o=i.useRef(null);const p=T();i.useState(!1);const[s,c]=i.useState({}),[w,y]=i.useState({}),[B,N]=i.useState(xe(-7)),[D,F]=i.useState(new Date().getFullYear()+"-"+(new Date().getMonth()+1)+"-"+new Date().getDate());i.useState(1);const[u,j]=i.useState(0),[x,P]=i.useState(0),L=v(t=>t.loginUser.value.user),m=v(t=>t.enabledAddonsConfig.value.enabledAddons);i.useEffect(()=>{document.title="MeEdu后台管理",p(Y("主页")),V(),X(),f()},[]),i.useEffect(()=>{if(typeof s.today_register_user_count>"u"||typeof s.user_count>"u"||isNaN(s.today_register_user_count)||isNaN(s.user_count)||s.user_count===0)j(0);else{let t=(s.today_register_user_count/s.user_count).toFixed(3);j(Math.floor(t*100))}P(r(s.this_month_paid_sum,s.last_month_paid_sum))},[s]);const V=()=>{q().then(t=>{c(t.data)})},X=()=>{S().then(t=>{y(t.data)})},R=t=>{var a=[];for(let l in t)a.push(l);return a},h=t=>Object.values(t),f=()=>(U({start_at:B,end_at:D}).then(a=>{G(a.data)}),()=>{window.onresize=null}),G=t=>{let a=o.current,l=k(a);l.setOption({tooltip:{trigger:"axis"},legend:{data:["每日注册用户","每日创建订单","每日已支付订单","每日营收"],x:"right"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:R(t.order_created)},yAxis:{type:"value"},series:[{name:"每日注册用户",type:"line",data:h(t.user_register)},{name:"每日创建订单",type:"line",data:h(t.order_created)},{name:"每日已支付订单",type:"line",data:h(t.order_paid)},{name:"每日营收",type:"line",data:h(t.order_sum)}]}),window.onresize=()=>{l.resize()}},O=(t,a)=>{a[1]+=" 23:59:59",N(a[0]),F(a[1])},d=t=>typeof L.permissions[t]<"u",g=t=>Number(t).toLocaleString(),b=t=>t>=1e8?(t/1e8).toFixed(2)+"亿":t>=1e7?(t/1e7).toFixed(2)+"千万":t>=1e6?(t/1e6).toFixed(2)+"百万":t>=1e4?(t/1e4).toFixed(2)+"万":t>=1e3?(t/1e3).toFixed(2)+"千":t,r=(t,a)=>{if(typeof t!="number"||typeof a!="number"||t===0)return 0;if(a===0)return 100;let l=((t-a)/a).toFixed(2);return Math.floor(l*100)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:n.el_content,children:[e.jsxs("div",{className:n.el_top_row1,children:[e.jsxs("div",{className:n.el_row_item,children:[e.jsx("span",{className:n.item_title,children:"今日收入(元)"}),e.jsx("p",{children:g(s.today_paid_sum||0)}),e.jsxs("div",{className:n.item_info,children:[e.jsxs("span",{children:["昨日：",b(s.yesterday_paid_sum)]}),e.jsxs("span",{children:["较昨日：",r(s.today_paid_sum,s.yesterday_paid_sum)<0&&e.jsxs("strong",{className:"c-danger",children:[r(s.today_paid_sum,s.yesterday_paid_sum),"%"]}),r(s.today_paid_sum,s.yesterday_paid_sum)>=0&&e.jsxs("strong",{children:[r(s.today_paid_sum,s.yesterday_paid_sum),"%"]})]})]})]}),e.jsxs("div",{className:n.el_row_item,children:[e.jsx("span",{className:n.item_title,children:"今日支付人数"}),e.jsx("p",{children:g(s.today_paid_user_num||0)}),e.jsxs("div",{className:n.item_info,children:[e.jsxs("span",{children:["昨日：",b(s.yesterday_paid_user_num)]}),e.jsxs("span",{children:["较昨日：",r(s.today_paid_user_num,s.yesterday_paid_user_num)<0&&e.jsxs("strong",{className:"c-danger",children:[r(s.today_paid_user_num,s.yesterday_paid_user_num),"%"]}),r(s.today_paid_user_num,s.yesterday_paid_user_num)>=0&&e.jsxs("strong",{children:[r(s.today_paid_user_num,s.yesterday_paid_user_num),"%"]})]})]})]}),e.jsxs("div",{className:n.el_row_item2,children:[e.jsxs("div",{className:n.el_item,children:[e.jsx("span",{children:"总学员数"}),e.jsx("span",{className:n.el_item_num,children:g(s.user_count||0)}),e.jsxs("span",{className:n.el_item_increase,children:["较昨日：",u<0&&e.jsxs("strong",{className:"c-danger",children:[u,"%"]}),u>=0&&e.jsxs("strong",{children:[u,"%"]})]})]}),e.jsxs("div",{className:n.el_item,children:[e.jsx("span",{children:"本月收入(元)"}),e.jsx("span",{className:n.el_item_num,children:g(s.this_month_paid_sum||0)}),e.jsxs("span",{className:n.el_item_increase,children:["较上月：",x<0&&e.jsxs("strong",{className:"c-danger",children:[x,"%"]}),x>=0&&e.jsxs("strong",{children:[x,"%"]})]})]})]})]}),e.jsxs("div",{className:n.el_top_row2,children:[e.jsx("div",{className:n.tit,children:"快速访问"}),d("course")&&e.jsxs(_,{to:"/course/vod/index",className:n.el_row2_item,children:[e.jsx("img",{src:ce}),e.jsx("span",{children:"录播课"})]}),m.Zhibo&&d("addons.Zhibo.course.list")&&e.jsxs(_,{to:"/live/course/index",className:n.el_row2_item,children:[e.jsx("img",{src:de}),e.jsx("span",{children:"直播课"})]}),m.MeeduTopics&&d("addons.meedu_topics.topic.list")&&e.jsxs(_,{to:"/topic/index",className:n.el_row2_item,children:[e.jsx("img",{src:le}),e.jsx("span",{children:"图文"})]}),m.MeeduBooks&&d("addons.meedu_books.book.list")&&e.jsxs(_,{to:"/meedubook/book/index",className:n.el_row2_item,children:[e.jsx("img",{src:_e}),e.jsx("span",{children:"电子书"})]}),m.LearningPaths&&d("addons.learnPaths.path.list")&&e.jsxs(_,{to:"/learningpath/path/index",className:n.el_row2_item,children:[e.jsx("img",{src:me}),e.jsx("span",{children:"学习路径"})]}),m.Paper&&d("addons.Paper.paper.list")&&e.jsxs(_,{to:"/exam/paper/index",className:n.el_row2_item,children:[e.jsx("img",{src:pe}),e.jsx("span",{children:"试卷"})]})]}),e.jsxs("div",{className:n.el_top_row3,children:[e.jsx("div",{className:n.tit,children:"统计分析"}),e.jsxs("div",{className:n.selcharttimebox,children:[e.jsx(ue,{format:"YYYY-MM-DD",onChange:O}),e.jsx(M,{type:"primary",className:"ml-10",onClick:()=>{f()},children:"筛选"})]}),e.jsx("div",{className:n.charts,children:e.jsx("div",{ref:o,style:{width:"100%",height:280,marginLeft:-30,position:"relative"}})})]}),e.jsxs("div",{className:n.copyright,children:[e.jsx("p",{className:"mb-10",children:"Powered By MeEdu"}),e.jsxs("p",{className:n.info,children:[e.jsxs("span",{children:["PHP",w.php_version," "]}),e.jsxs("span",{className:"mx-10",children:["API程序",w.meedu_version]}),e.jsx("span",{children:"后台前端程序v4.9.8"})]})]})]})})};export{we as default};
