import{f as F,u as Y,r as a,t as M,j as e,I as K,B as v,d as U,h as O}from"./index-3fd54424.js";import{o as q}from"./miaosha-30265f4e.js";import{B as G}from"./index-c3c15456.js";import{T as H}from"./index-04a133fc.js";import{T as J}from"./index-47408a6e.js";import{T as Q}from"./Table-59a53b18.js";import{D as V}from"./index-a9db941d.js";import{T as S}from"./index-2c039b27.js";import"./LeftOutlined-a0f8cfa6.js";import"./PlusOutlined-18e71fec.js";import"./addEventListener-1752243f.js";import"./useIcons-235bc0cd.js";import"./CheckOutlined-44e74bd9.js";import"./Pagination-a2ebdf00.js";import"./useForceUpdate-56773729.js";import"./responsiveObserver-a0dea2e5.js";import"./index-ff4e3b6e.js";import"./index-a56efb1a.js";import"./iconUtil-14ff0944.js";const{RangePicker:W}=V,fe=()=>{const r=new URLSearchParams(F().search),N=Y(),[m,i]=a.useState(!1),[b,h]=a.useState([]),[o,l]=a.useState(1),[n,u]=a.useState(10),[w,y]=a.useState(0),[c,p]=a.useState(!1),[g,f]=a.useState(""),[C,x]=a.useState([]),[_,j]=a.useState([]),[d,k]=a.useState("1"),[T,D]=a.useState(Number(r.get("id"))),A=[{key:"1",label:"已支付"},{key:"0",label:"未支付"},{key:"3",label:"已取消"}];a.useEffect(()=>{document.title="秒杀订单",N(M("秒杀订单"))},[]),a.useEffect(()=>{D(Number(r.get("id"))),L()},[r.get("id"),o,n,c,d]);const L=()=>{m||(i(!0),q({page:o,size:n,status:d,gid:T,user_id:g,created_at:C}).then(t=>{h(t.data.data.data),y(t.data.data.total),i(!1)}).catch(t=>{i(!1)}))},P=()=>{l(1),u(10),h([]),f(""),j([]),x([]),p(!c)},B=t=>{k(t)},I={current:o,pageSize:n,total:w,onChange:(t,s)=>R(t,s),showSizeChanger:!0},R=(t,s)=>{l(t),u(s)},z=[{title:"商品名称",width:400,render:(t,s)=>e.jsxs(e.Fragment,{children:[!s.goods&&e.jsx("span",{className:"c-red",children:"商品已删除"}),s.goods&&e.jsx(H,{value:s.goods.goods_thumb,width:120,height:90,title:s.goods.goods_title,border:4})]})},{title:"学员",width:300,render:(t,s)=>e.jsxs(e.Fragment,{children:[s.user&&e.jsxs("div",{className:"user-item d-flex",children:[e.jsx("div",{className:"avatar",children:e.jsx("img",{src:s.user.avatar,width:"40",height:"40"})}),e.jsx("div",{className:"ml-10",children:s.user.nick_name})]}),!s.user&&e.jsx("span",{className:"c-red",children:"学员不存在"})]})},{title:"秒杀价",width:150,render:(t,s)=>e.jsxs("div",{children:[s.charge,"元"]})},{title:"状态",width:100,render:(t,s)=>e.jsxs(e.Fragment,{children:[s.status===1&&e.jsx(S,{color:"success",children:"已支付"}),s.status!==1&&e.jsx(S,{color:"default",children:"未支付"})]})},{title:"时间",width:200,render:(t,s)=>e.jsx("div",{children:U(s.created_at)})}],E=t=>t&&t>=O().add(0,"days");return e.jsxs("div",{className:"meedu-main-body",children:[e.jsx(G,{title:"秒杀订单"}),e.jsxs("div",{className:"float-left mt-30",children:[e.jsx(K,{value:g,onChange:t=>{f(t.target.value)},allowClear:!0,style:{width:150},placeholder:"学员ID"}),e.jsx(W,{disabledDate:E,format:"YYYY-MM-DD",value:_,style:{marginLeft:10},onChange:(t,s)=>{s[1]+=" 23:59:59",x(s),j(t)},placeholder:["开始日期","结束日期"]}),e.jsx(v,{className:"ml-10",onClick:P,children:"清空"}),e.jsx(v,{className:"ml-10",type:"primary",onClick:()=>{l(1),p(!c)},children:"筛选"})]}),e.jsx("div",{className:"float-left mt-30",children:e.jsx(J,{defaultActiveKey:d,items:A,onChange:B})}),e.jsx("div",{className:"float-left",children:e.jsx(Q,{loading:m,columns:z,dataSource:b,rowKey:t=>t.id,pagination:I})})]})};export{fe as default};
