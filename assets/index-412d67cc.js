import{u as P,b as _,r as a,t as z,j as e,d as N,S as m,D as T,B,e as F,E as L,m as M,M as O}from"./index-b4683d61.js";import{l as R,d as A}from"./certificate-285fae4b.js";import{P as i}from"./index-573a6ce5.js";import{T as K}from"./Table-76e623b5.js";import"./addEventListener-a27ae3f4.js";import"./useIcons-e0af7133.js";import"./CheckOutlined-e6bc730e.js";import"./Pagination-d2c763c6.js";import"./LeftOutlined-9e6e73a2.js";import"./useForceUpdate-f2aff5e0.js";import"./responsiveObserver-dc429d3b.js";import"./index-c09cc6d7.js";import"./index-10f1a096.js";import"./iconUtil-f3f90360.js";const{confirm:$}=O,se=()=>{const f=P(),l=_(),[r,n]=a.useState(!1),[x,d]=a.useState([]),[c,u]=a.useState(1),[o,h]=a.useState(10),[j,g]=a.useState(0),[p,y]=a.useState(!1);a.useEffect(()=>{document.title="学员证书",f(z("学员证书"))},[]),a.useEffect(()=>{k()},[c,o,p]);const k=()=>{r||(n(!0),R({page:c,size:o}).then(t=>{d(t.data.data.data),g(t.data.data.total),n(!1)}).catch(t=>{n(!1)}))},C=[{title:"证书名",width:600,render:(t,s)=>e.jsx("span",{children:s.name})},{title:"已授予人数",render:(t,s)=>e.jsxs("span",{children:[s.users_count,"人"]})},{title:"创建时间",width:200,render:(t,s)=>e.jsx("div",{children:N(s.created_at)})},{title:"操作",width:120,render:(t,s)=>{const D=[{key:"1",label:e.jsx(i,{type:"link",text:"编辑",class:"c-primary",icon:null,p:"addons.cert.update",onClick:()=>{l("/certificate/update?id="+s.id)},disabled:null})},{key:"2",label:e.jsx(i,{type:"link",text:"删除",class:"c-red",icon:null,p:"addons.cert.delete",onClick:()=>{S(s.id)},disabled:null})}];return e.jsxs(m,{children:[e.jsx(i,{type:"link",text:"授予",class:"c-primary",icon:null,p:"addons.cert.users",onClick:()=>{l("/certificate/users?id="+s.id)},disabled:null}),e.jsx(T,{menu:{items:D},children:e.jsx(B,{type:"link",className:"c-primary",onClick:E=>E.preventDefault(),children:e.jsxs(m,{size:"small",align:"center",children:["更多",e.jsx(F,{})]})})})]})}}],S=t=>{t!==0&&$({title:"操作确认",icon:e.jsx(L,{}),content:"确认删除此证书？",centered:!0,okText:"确认",cancelText:"取消",onOk(){r||(n(!0),A(t).then(()=>{n(!1),M.success("删除成功"),b()}).catch(s=>{n(!1)}))},onCancel(){console.log("Cancel")}})},b=()=>{u(1),d([]),y(!p)},v={current:c,pageSize:o,total:j,onChange:(t,s)=>w(t,s),showSizeChanger:!0},w=(t,s)=>{u(t),h(s)};return e.jsxs("div",{className:"meedu-main-body",children:[e.jsx("div",{className:"float-left mb-30",children:e.jsx(i,{type:"primary",text:"新建证书",class:"",icon:null,p:"addons.cert.store",onClick:()=>l("/certificate/create"),disabled:null})}),e.jsx("div",{className:"float-left",children:e.jsx(K,{loading:r,columns:C,dataSource:x,rowKey:t=>t.id,pagination:v})})]})};export{se as default};
