import{u as v,b as E,r as a,a as P,t as w,j as e,S as T,E as z,m as B,M as D}from"./index-b4683d61.js";import{a as N,d as R}from"./admin-role-11f718fe.js";import{B as A}from"./index-5f967da4.js";import{P as l}from"./index-573a6ce5.js";import{T as L}from"./Table-76e623b5.js";import"./LeftOutlined-9e6e73a2.js";import"./addEventListener-a27ae3f4.js";import"./useIcons-e0af7133.js";import"./CheckOutlined-e6bc730e.js";import"./Pagination-d2c763c6.js";import"./useForceUpdate-f2aff5e0.js";import"./responsiveObserver-dc429d3b.js";import"./index-c09cc6d7.js";import"./index-10f1a096.js";import"./iconUtil-f3f90360.js";const{confirm:F}=D,$=()=>{const u=v(),c=E(),[n,i]=a.useState(!1),[f,d]=a.useState([]),[r,m]=a.useState(1),[o,x]=a.useState(10),[h,g]=a.useState(0),[p,j]=a.useState(!1);P(t=>t.loginUser.value.user),a.useEffect(()=>{document.title="管理员角色",u(w("管理员角色"))},[]),a.useEffect(()=>{y()},[r,o,p]);const y=()=>{n||(i(!0),N({page:r,size:o,sort:"id",order:"desc"}).then(t=>{d(t.data.data),g(t.data.total),i(!1)}).catch(t=>{i(!1)}))},S=()=>{m(1),d([]),j(!p)},C={current:r,pageSize:o,total:h,onChange:(t,s)=>k(t,s),showSizeChanger:!0},k=(t,s)=>{m(t),x(s)},_=[{title:"ID",width:120,render:(t,s)=>e.jsx("span",{children:s.id})},{title:"姓名",width:120,dataIndex:"display_name",render:t=>e.jsx("span",{children:t})},{title:"描述",render:(t,s)=>e.jsx("span",{children:s.description})},{title:"操作",width:130,render:(t,s)=>e.jsx(T,{children:s.slug!=="administrator"&&e.jsxs(e.Fragment,{children:[e.jsx(l,{type:"link",text:"编辑",class:"c-primary",icon:null,p:"administrator_role.update",onClick:()=>{c("/system/adminroles/update?id="+s.id)},disabled:null}),e.jsx(l,{type:"link",text:"删除",class:"c-red",icon:null,p:"administrator_role.destroy",onClick:()=>{b(s.id)},disabled:null})]})})}],b=t=>{t!==0&&F({title:"操作确认",icon:e.jsx(z,{}),content:"确认删除此角色？",centered:!0,okText:"确认",cancelText:"取消",onOk(){n||(i(!0),R(t).then(()=>{i(!1),B.success("删除成功"),S()}).catch(s=>{i(!1)}))},onCancel(){console.log("Cancel")}})};return e.jsxs("div",{className:"meedu-main-body",children:[e.jsx(A,{title:"管理员角色"}),e.jsx("div",{className:"float-left mt-30",children:e.jsx(l,{type:"primary",text:"新建管理员角色",class:"",icon:null,p:"administrator_role.store",onClick:()=>c("/system/adminroles/create"),disabled:null})}),e.jsx("div",{className:"float-left mt-30",children:e.jsx(L,{loading:n,columns:_,dataSource:f,rowKey:t=>t.id,pagination:C})})]})};export{$ as default};
