import{u as w,b as v,r as a,a as E,t as P,co as D,j as e,cl as T,S as z,E as N,cp as F,m as I,M as L}from"./index-b4683d61.js";import{P as l}from"./index-573a6ce5.js";import{T as A}from"./Table-76e623b5.js";import"./addEventListener-a27ae3f4.js";import"./useIcons-e0af7133.js";import"./CheckOutlined-e6bc730e.js";import"./Pagination-d2c763c6.js";import"./LeftOutlined-9e6e73a2.js";import"./useForceUpdate-f2aff5e0.js";import"./responsiveObserver-dc429d3b.js";import"./index-c09cc6d7.js";import"./index-10f1a096.js";import"./iconUtil-f3f90360.js";const{confirm:M}=L,Y=()=>{const u=w(),c=v(),[n,i]=a.useState(!1),[h,d]=a.useState([]),[r,m]=a.useState(1),[o,x]=a.useState(10),[f,g]=a.useState(0),[p,j]=a.useState(!1);E(t=>t.loginUser.value.user),a.useEffect(()=>{document.title="管理人员",u(P("管理人员"))},[]),a.useEffect(()=>{S()},[r,o,p]);const S=()=>{n||(i(!0),D({page:r,size:o,sort:"id",order:"desc"}).then(t=>{d(t.data.data),g(t.data.total),i(!1)}).catch(t=>{i(!1)}))},y=()=>{m(1),d([]),j(!p)},_={current:r,pageSize:o,total:f,onChange:(t,s)=>C(t,s),showSizeChanger:!0},C=(t,s)=>{m(t),x(s)},b=[{title:"ID",width:120,render:(t,s)=>e.jsx("span",{children:s.id})},{title:"姓名",width:200,dataIndex:"name",render:t=>e.jsx("span",{children:t})},{title:"登录邮箱",width:220,dataIndex:"email",render:t=>e.jsx("span",{children:t})},{title:"登录日志",render:(t,s)=>e.jsxs("span",{children:[T(s.last_login_date)," / ",s.last_login_ip]})},{title:"禁止登录",width:130,render:(t,s)=>e.jsxs(e.Fragment,{children:[s.is_ban_login===0&&e.jsx("span",{children:"否"}),s.is_ban_login!==0&&e.jsx("span",{children:"是"})]})},{title:"操作",width:130,render:(t,s)=>e.jsxs(z,{children:[e.jsx(l,{type:"link",text:"编辑",class:"c-primary",icon:null,p:"administrator.update",onClick:()=>{c("/system/administrator/update?id="+s.id)},disabled:null}),e.jsx(l,{type:"link",text:"删除",class:"c-red",icon:null,p:"administrator.destroy",onClick:()=>{k(s.id)},disabled:null})]})}],k=t=>{t!==0&&M({title:"操作确认",icon:e.jsx(N,{}),content:"确认删除此管理员？",centered:!0,okText:"确认",cancelText:"取消",onOk(){n||(i(!0),F(t).then(()=>{i(!1),I.success("删除成功"),y()}).catch(s=>{i(!1)}))},onCancel(){console.log("Cancel")}})};return e.jsxs("div",{className:"meedu-main-body",children:[e.jsx("div",{className:"float-left",children:e.jsx(l,{type:"primary",text:"新建管理员",class:"",icon:null,p:"administrator.store",onClick:()=>c("/system/administrator/create"),disabled:null})}),e.jsx("div",{className:"float-left mt-30",children:e.jsx(A,{loading:n,columns:b,dataSource:h,rowKey:t=>t.id,pagination:_})})]})};export{Y as default};
