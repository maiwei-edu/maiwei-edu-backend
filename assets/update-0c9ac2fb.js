import{f as v,u as C,b as N,r as s,t as w,j as e,g as F,I as u,S as I,B as p,m as S}from"./index-3fd54424.js";import{b as B,u as k}from"./wenda-b79732f0.js";import{B as E}from"./index-c3c15456.js";import{H as q}from"./index-d5d1e443.js";import{F as t}from"./index-0ca68444.js";import"./LeftOutlined-a0f8cfa6.js";import"./InfoCircleOutlined-fefc69ce.js";import"./row-98a37fbf.js";import"./responsiveObserver-a0dea2e5.js";const W=()=>{const l=new URLSearchParams(v().search),[n]=t.useForm(),h=C(),c=N(),[m,x]=s.useState(!0),[d,o]=s.useState(!1),[a,f]=s.useState(Number(l.get("id")));s.useEffect(()=>{document.title="编辑问答分类",h(w("编辑问答分类")),j()},[a]),s.useEffect(()=>{f(Number(l.get("id")))},[l.get("id")]);const j=async()=>{await g(),x(!1)},g=async()=>{if(a===0)return;var i=(await B(a)).data.data;n.setFieldsValue({name:i.name,sort:i.sort})},b=r=>{d||(o(!0),k(a,r).then(i=>{o(!1),S.success("保存成功！"),c(-1)}).catch(i=>{o(!1)}))},y=r=>{console.log("Failed:",r)};return e.jsxs("div",{className:"meedu-main-body",children:[e.jsx(E,{title:"编辑问答分类"}),m&&e.jsx("div",{className:"float-left text-center mt-30",children:e.jsx(F,{})}),e.jsx("div",{style:{display:m?"none":"block"},className:"float-left mt-30",children:e.jsxs(t,{form:n,name:"wenda-category-update",labelCol:{span:3},wrapperCol:{span:21},initialValues:{remember:!0},onFinish:b,onFinishFailed:y,autoComplete:"off",children:[e.jsx(t.Item,{label:"分类名",name:"name",rules:[{required:!0,message:"请输入分类名!"}],children:e.jsx(u,{style:{width:300},placeholder:"请输入分类名",allowClear:!0})}),e.jsx(t.Item,{label:"排序",name:"sort",rules:[{required:!0,message:"请输入排序!"}],children:e.jsxs(I,{align:"baseline",style:{height:32},children:[e.jsx(t.Item,{name:"sort",rules:[{required:!0,message:"请输入排序!"}],children:e.jsx(u,{style:{width:300},placeholder:"请输入排序",allowClear:!0,type:"number"})}),e.jsx("div",{className:"ml-10",children:e.jsx(q,{text:"请输入整数。小数排在前，大数排在后"})})]})})]})}),e.jsx("div",{className:"bottom-menus",children:e.jsxs("div",{className:"bottom-menus-box",children:[e.jsx("div",{children:e.jsx(p,{loading:d,type:"primary",onClick:()=>n.submit(),children:"保存"})}),e.jsx("div",{className:"ml-24",children:e.jsx(p,{type:"default",onClick:()=>c(-1),children:"取消"})})]})})]})};export{W as default};
