import{u as y,b as C,r as n,t as w,j as e,I as p,B as h,m as F}from"./index-b4683d61.js";import{c as N,s as B}from"./admin-role-11f718fe.js";import{B as I}from"./index-5f967da4.js";import{F as a}from"./index-d434f3eb.js";import{T as k}from"./index-52c44623.js";import"./LeftOutlined-9e6e73a2.js";import"./row-4ee18533.js";import"./responsiveObserver-dc429d3b.js";import"./useIcons-e0af7133.js";import"./CheckOutlined-e6bc730e.js";import"./iconUtil-f3f90360.js";const V=()=>{const[m]=a.useForm(),f=y(),c=C(),[d,o]=n.useState(!1),[x,j]=n.useState([]);n.useEffect(()=>{document.title="新建管理员角色",f(w("新建管理员角色")),b()},[]);const b=()=>{N().then(s=>{const r=[];let l=s.data.permissions;for(let t in l){let u=[];for(let i=0;i<l[t].length;i++)u.push({value:l[t][i].id,title:l[t][i].display_name});r.push({value:t,title:t,children:u})}j(r)})},g=s=>{d||(o(!0),B(s).then(r=>{o(!1),F.success("保存成功！"),c(-1)}).catch(r=>{o(!1)}))},v=s=>{console.log("Failed:",s)};return e.jsxs("div",{className:"meedu-main-body",children:[e.jsx(I,{title:"新建管理员角色"}),e.jsx("div",{className:"float-left mt-30",children:e.jsxs(a,{form:m,name:"administrator-create",labelCol:{span:3},wrapperCol:{span:21},initialValues:{remember:!0},onFinish:g,onFinishFailed:v,autoComplete:"off",children:[e.jsx(a.Item,{label:"角色名",name:"display_name",rules:[{required:!0,message:"请输入角色名!"}],children:e.jsx(p,{style:{width:300},placeholder:"请输入角色名",allowClear:!0})}),e.jsx(a.Item,{label:"描述",name:"description",rules:[{required:!0,message:"请输入描述!"}],children:e.jsx(p,{style:{width:300},placeholder:"请输入描述",allowClear:!0})}),e.jsx(a.Item,{label:"权限",name:"permission_ids",children:e.jsx(k,{listHeight:400,style:{width:"100%"},treeCheckable:!0,placeholder:"请选择权限",multiple:!0,allowClear:!0,treeData:x})})]})}),e.jsx("div",{className:"bottom-menus",children:e.jsxs("div",{className:"bottom-menus-box",children:[e.jsx("div",{children:e.jsx(h,{loading:d,type:"primary",onClick:()=>m.submit(),children:"保存"})}),e.jsx("div",{className:"ml-24",children:e.jsx(h,{type:"default",onClick:()=>c(-1),children:"取消"})})]})})]})};export{V as default};
