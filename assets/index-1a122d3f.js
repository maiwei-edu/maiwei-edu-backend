import{r as t,j as e,M as N,m as b,bS as a}from"./index-b4683d61.js";import{i as I}from"./InboxOutlined-1c6772bb.js";import{U as w,s as E}from"./selected-177ec16c.js";import{R as L,C as o}from"./row-4ee18533.js";import{E as R}from"./useIcons-e0af7133.js";import{P as z}from"./Pagination-d2c763c6.js";const $=n=>{const[i,d]=t.useState(0),[r,g]=t.useState([]),[x,f]=t.useState(!1),[c,h]=t.useState(1),[m,u]=t.useState(15),[j,p]=t.useState(0),[l,y]=t.useState(""),S=[{key:0,name:"全部图片"},{key:1,name:"幻灯片"},{key:2,name:"课程封面"},{key:3,name:"课程详情页"},{key:4,name:"文章配图"}];t.useEffect(()=>{d(n.from)},[n.from]);const k=()=>{I({page:c,size:m,from:i}).then(s=>{p(s.data.data.total),g(s.data.data.data)}).catch(s=>{console.log("错误,",s)})},v=()=>{h(1),g([]),f(!x)};return t.useEffect(()=>{n.open&&k()},[n.open,i,x,c,m]),e.jsx(e.Fragment,{children:n.open?e.jsx(N,{title:"选择图片",closable:!1,onCancel:()=>{n.onCancel()},centered:!0,open:!0,width:881,maskClosable:!1,onOk:()=>{if(!l){b.error("请选择图片后确定");return}n.onSelected(l)},children:e.jsxs(L,{style:{width:830,minHeight:520,marginTop:24},children:[e.jsx("div",{style:{position:"absolute",right:30,top:15,zIndex:15},children:e.jsx(w,{from:i,onUpdate:()=>{v()}})}),e.jsx(o,{span:5,children:e.jsx("div",{className:a["category-box"],children:S.map(s=>e.jsx("div",{className:s.key===i?a["category-act-item"]:a["category-item"],onClick:()=>d(s.key),children:s.name},s.key))})}),e.jsxs(o,{span:19,children:[r.length===0&&e.jsx(o,{span:24,children:e.jsx(R,{description:"暂无图片"})}),e.jsx("div",{className:a["image-list-box"],children:r.map(s=>e.jsxs("div",{className:l.indexOf(s.url)!==-1?a["image-active-item"]:a["image-item"],onClick:()=>{y(s.url)},children:[l.indexOf(s.url)!==-1&&e.jsx("div",{className:a.sel,children:e.jsx("img",{src:E})}),e.jsx("div",{className:a["image-render"],children:e.jsx("div",{className:a["image-view"],style:{backgroundImage:`url(${s.url})`}})}),e.jsx("div",{className:a["image-name"],children:e.jsx("div",{className:a.name,children:s.name})})]},s.id))}),r.length>0&&e.jsx(o,{span:24,style:{display:"flex",flexDirection:"row-reverse",marginTop:30},children:e.jsx(z,{onChange:(s,C)=>{h(s),u(C)},pageSize:m,defaultCurrent:c,total:j})})]})]})}):null})};export{$ as S};
