import{f as B,u as k,b as E,r,t as R,j as e,g as U,I as i,S as g,B as x,m as D}from"./index-3fd54424.js";import{a as L,u as T}from"./multi-share-8207cca7.js";import{B as V}from"./index-c3c15456.js";import{H as j}from"./index-d5d1e443.js";import{U as G}from"./index-edf85c8b.js";import{F as a}from"./index-0ca68444.js";import{R as H,C as b}from"./row-98a37fbf.js";import"./LeftOutlined-a0f8cfa6.js";import"./InfoCircleOutlined-fefc69ce.js";import"./InboxOutlined-35d156a9.js";import"./selected-7e6221ce.js";import"./Dragger-3ad849c3.js";import"./useForceUpdate-56773729.js";import"./DeleteOutlined-529a4ffa.js";import"./CheckOutlined-44e74bd9.js";import"./useIcons-235bc0cd.js";import"./Pagination-a2ebdf00.js";import"./responsiveObserver-a0dea2e5.js";import"./index-ff4e3b6e.js";const le=()=>{const d=new URLSearchParams(B().search),[o]=a.useForm(),f=k(),n=E(),[c,w]=r.useState(!0),[u,m]=r.useState(!1),[l,y]=r.useState(Number(d.get("id"))),[h,p]=r.useState(""),[_,I]=r.useState(0),[S,N]=r.useState("");r.useEffect(()=>{document.title="编辑分销活动",f(R("编辑分销活动")),v()},[l]),r.useEffect(()=>{y(Number(d.get("id")))},[d.get("id")]);const v=async()=>{await C(),w(!1)},C=async()=>{if(l===0)return;var s=(await L(l)).data;p(s.goods_thumb),o.setFieldsValue({goods_title:s.goods_title,goods_charge:s.goods_charge,goods_thumb:s.goods_thumb,reward:s.reward,reward2:s.reward2,reward3:s.reward3}),I(s.goods_id),N(s.goods_type)},F=t=>{u||(m(!0),t.goods_id=_,t.goods_type=S,T(l,t).then(s=>{m(!1),D.success("保存成功！"),n(-1)}).catch(s=>{m(!1)}))},q=t=>{console.log("Failed:",t)};return e.jsxs("div",{className:"meedu-main-body",children:[e.jsx(V,{title:"编辑分销活动"}),c&&e.jsx("div",{className:"float-left text-center mt-30",children:e.jsx(U,{})}),e.jsx("div",{style:{display:c?"none":"block"},className:"float-left mt-30",children:e.jsxs(a,{form:o,name:"multiShare-update",labelCol:{span:3},wrapperCol:{span:21},initialValues:{remember:!0},onFinish:F,onFinishFailed:q,autoComplete:"off",children:[e.jsx(a.Item,{label:"商品名",name:"goods_title",rules:[{required:!0,message:"请输入商品名!"}],children:e.jsx(i,{style:{width:300},placeholder:"请输入商品名",allowClear:!0})}),e.jsx(a.Item,{label:"商品价格",name:"goods_charge",rules:[{required:!0,message:"请输入商品价格!"}],children:e.jsx(i,{type:"number",style:{width:300},placeholder:"单位：元",allowClear:!0})}),e.jsx(a.Item,{label:"商品封面",name:"goods_thumb",rules:[{required:!0,message:"请上传商品封面!"}],children:e.jsx(G,{text:"上传图片",onSelected:t=>{o.setFieldsValue({goods_thumb:t}),p(t)}})}),h&&e.jsxs(H,{style:{marginBottom:22},children:[e.jsx(b,{span:3}),e.jsx(b,{span:21,children:e.jsx("div",{className:"normal-thumb-box",style:{backgroundImage:`url(${h})`,width:120,height:90}})})]}),e.jsx(a.Item,{label:"一级奖励",name:"reward",rules:[{required:!0,message:"请输入一级分销奖励!"}],children:e.jsxs(g,{align:"baseline",style:{height:32},children:[e.jsx(a.Item,{name:"reward",rules:[{required:!0,message:"请输入一级分销奖励!"}],children:e.jsx(i,{style:{width:300},placeholder:"请输入一级分销奖励",allowClear:!0,type:"number"})}),e.jsx("div",{className:"ml-10",children:e.jsx(j,{text:"最小单位：元。不支持小数。"})})]})}),e.jsx(a.Item,{label:"二级奖励",name:"reward2",rules:[{required:!0,message:"请输入二级分销奖励!"}],children:e.jsxs(g,{align:"baseline",style:{height:32},children:[e.jsx(a.Item,{name:"reward2",rules:[{required:!0,message:"请输入二级分销奖励!"}],children:e.jsx(i,{style:{width:300},placeholder:"请输入二级分销奖励",allowClear:!0,type:"number"})}),e.jsx("div",{className:"ml-10",children:e.jsx(j,{text:"最小单位：元。不支持小数。"})})]})})]})}),e.jsx("div",{className:"bottom-menus",children:e.jsxs("div",{className:"bottom-menus-box",children:[e.jsx("div",{children:e.jsx(x,{loading:u,type:"primary",onClick:()=>o.submit(),children:"保存"})}),e.jsx("div",{className:"ml-24",children:e.jsx(x,{type:"default",onClick:()=>n(-1),children:"取消"})})]})})]})};export{le as default};
