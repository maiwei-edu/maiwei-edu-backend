import{u as M,b as E,r as a,t as I,j as t,I as P,B as f,d as T,S as z,E as B,m as D,M as F}from"./index-3fd54424.js";import{l as O,d as K}from"./multi-share-8207cca7.js";import{P as r}from"./index-df05a090.js";import{O as R}from"./index-cbea6645.js";import{T as $}from"./Table-59a53b18.js";import"./icon-option-c9fff0bb.js";import"./addEventListener-1752243f.js";import"./useIcons-235bc0cd.js";import"./CheckOutlined-44e74bd9.js";import"./Pagination-a2ebdf00.js";import"./LeftOutlined-a0f8cfa6.js";import"./useForceUpdate-56773729.js";import"./responsiveObserver-a0dea2e5.js";import"./index-ff4e3b6e.js";import"./index-a56efb1a.js";import"./iconUtil-14ff0944.js";const{confirm:A}=F,ie=()=>{const j=M(),o=E(),[d,l]=a.useState(!1),[v,c]=a.useState([]),[u,i]=a.useState(1),[m,h]=a.useState(10),[y,S]=a.useState(0),[n,p]=a.useState(!1),[x,g]=a.useState("");a.useEffect(()=>{document.title="分销活动",j(I("分销活动"))},[]),a.useEffect(()=>{w()},[u,m,n]);const w=()=>{d||(l(!0),O({page:u,size:m,keywords:x}).then(e=>{c(e.data.data.data),S(e.data.data.total),l(!1)}).catch(e=>{l(!1)}))},C=()=>{i(1),h(10),c([]),g(""),p(!n)},_={current:u,pageSize:m,total:y,onChange:(e,s)=>k(e,s),showSizeChanger:!0},k=(e,s)=>{i(e),h(s)},b=[{title:"类型",dataIndex:"goods_type_text",render:e=>t.jsx("span",{children:e})},{title:"商品名称",width:400,dataIndex:"goods_title",render:e=>t.jsx("span",{children:e})},{title:"价格",width:200,dataIndex:"goods_charge",render:e=>t.jsxs("span",{children:[e,"元"]})},{title:"奖励",width:200,render:(e,s)=>t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:["一级：",s.reward,"元"]}),t.jsxs("div",{children:["二级：",s.reward2,"元"]})]})},{title:"时间",width:200,dataIndex:"created_at",render:e=>t.jsx("span",{children:T(e)})},{title:"操作",width:130,render:(e,s)=>t.jsxs(z,{children:[t.jsx(r,{type:"link",text:"编辑",class:"c-primary",icon:null,p:"addons.MultiLevelShare.goods.update",onClick:()=>{o("/multi_level_share/goods/update?id="+s.id)},disabled:null}),t.jsx(r,{type:"link",text:"删除",class:"c-red",icon:null,p:"addons.MultiLevelShare.goods.delete",onClick:()=>{L(s.id)},disabled:null})]})}],N=()=>{i(1),c([]),p(!n)},L=e=>{e!==0&&A({title:"操作确认",icon:t.jsx(B,{}),content:"确认删除此活动？",centered:!0,okText:"确认",cancelText:"取消",onOk(){d||(l(!0),K(e).then(()=>{l(!1),D.success("删除成功"),N()}).catch(s=>{l(!1)}))},onCancel(){console.log("Cancel")}})};return t.jsxs("div",{className:"meedu-main-body",children:[t.jsxs("div",{className:"float-left j-b-flex mb-30",children:[t.jsxs("div",{className:"d-flex",children:[t.jsx(r,{type:"primary",text:"新建分销",class:"",icon:null,p:"addons.MultiLevelShare.goods.store",onClick:()=>o("/multi_level_share/goods/create"),disabled:null}),t.jsx(r,{type:"primary",text:"奖励记录",class:"ml-10",icon:null,p:"addons.MultiLevelShare.reward.list",onClick:()=>o("/multi_level_share/goods/rewards"),disabled:null}),t.jsx(R,{text:"分销配置",value:"/system/config?key=三级分销"})]}),t.jsxs("div",{className:"d-flex",children:[t.jsx(P,{value:x,onChange:e=>{g(e.target.value)},allowClear:!0,style:{width:150},placeholder:"商品名称关键字"}),t.jsx(f,{className:"ml-10",onClick:C,children:"清空"}),t.jsx(f,{className:"ml-10",type:"primary",onClick:()=>{i(1),p(!n)},children:"筛选"})]})]}),t.jsx("div",{className:"float-left",children:t.jsx($,{loading:d,columns:b,dataSource:v,rowKey:e=>e.id,pagination:_})})]})};export{ie as default};
