import{u as h,b as y,r as n,t as j,j as e,S as k,E as C,m as b,M as E}from"./index-3fd54424.js";import{c as S,a as v}from"./wenda-b79732f0.js";import{B as w}from"./index-c3c15456.js";import{P as r}from"./index-df05a090.js";import{T as B}from"./Table-59a53b18.js";import"./LeftOutlined-a0f8cfa6.js";import"./addEventListener-1752243f.js";import"./useIcons-235bc0cd.js";import"./CheckOutlined-44e74bd9.js";import"./Pagination-a2ebdf00.js";import"./useForceUpdate-56773729.js";import"./responsiveObserver-a0dea2e5.js";import"./index-ff4e3b6e.js";import"./index-a56efb1a.js";import"./iconUtil-14ff0944.js";const{confirm:N}=E,G=()=>{const d=h(),i=y(),[o,a]=n.useState(!1),[m,c]=n.useState([]),[l,p]=n.useState(!1);n.useEffect(()=>{document.title="问答分类",d(j("问答分类"))},[]),n.useEffect(()=>{u()},[l]);const u=()=>{o||(a(!0),S().then(t=>{c(t.data.data),a(!1)}).catch(t=>{a(!1)}))},f=()=>{c([]),p(!l)},x=[{title:"排序",width:120,render:(t,s)=>e.jsx("span",{children:s.sort})},{title:"分类名",dataIndex:"name",render:t=>e.jsx("span",{children:t})},{title:"操作",width:130,render:(t,s)=>e.jsxs(k,{children:[e.jsx(r,{type:"link",text:"编辑",class:"c-primary",icon:null,p:"addons.Wenda.category.update",onClick:()=>{i("/wenda/question/category/update?id="+s.id)},disabled:null}),e.jsx(r,{type:"link",text:"删除",class:"c-red",icon:null,p:"addons.Wenda.category.delete",onClick:()=>{g(s.id)},disabled:null})]})}],g=t=>{t!==0&&N({title:"操作确认",icon:e.jsx(C,{}),content:"确认删除此分类？",centered:!0,okText:"确认",cancelText:"取消",onOk(){o||(a(!0),v(t).then(()=>{a(!1),b.success("删除成功"),f()}).catch(s=>{a(!1)}))},onCancel(){console.log("Cancel")}})};return e.jsxs("div",{className:"meedu-main-body",children:[e.jsx(w,{title:"问答分类"}),e.jsx("div",{className:"float-left mb-30 mt-30",children:e.jsx(r,{type:"primary",text:"新建问答分类",class:"",icon:null,p:"addons.Wenda.category.store",onClick:()=>i("/wenda/question/category/create"),disabled:null})}),e.jsx("div",{className:"float-left",children:e.jsx(B,{loading:o,columns:x,dataSource:m,rowKey:t=>t.id,pagination:!1})})]})};export{G as default};
