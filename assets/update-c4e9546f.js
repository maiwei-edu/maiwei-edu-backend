import{f as N,u as C,b as F,r as i,t as S,j as e,g as V,I as n,S as m,B as p,m as _}from"./index-b4683d61.js";import{a as P,u as q}from"./role-513b287e.js";import{B as k}from"./index-5f967da4.js";import{H as d}from"./index-133d6e1c.js";import{F as s}from"./index-d434f3eb.js";import{S as B}from"./index-918ef875.js";import"./LeftOutlined-9e6e73a2.js";import"./InfoCircleOutlined-4d24221b.js";import"./row-4ee18533.js";import"./responsiveObserver-dc429d3b.js";const J=()=>{const o=new URLSearchParams(N().search),[l]=s.useForm(),j=C(),u=F(),[h,g]=i.useState(!0),[x,c]=i.useState(!1),[r,f]=i.useState(Number(o.get("id")));i.useEffect(()=>{document.title="编辑会员",j(S("编辑会员")),b()},[r]),i.useEffect(()=>{f(Number(o.get("id")))},[o.get("id")]);const b=async()=>{await y(),g(!1)},y=async()=>{if(r===0)return;var t=(await P(r)).data;l.setFieldsValue({description:t.description,name:t.name,is_show:t.is_show,charge:t.charge,expire_days:t.expire_days})},w=a=>{x||(c(!0),q(r,a).then(t=>{c(!1),_.success("保存成功！"),u(-1)}).catch(t=>{c(!1)}))},I=a=>{console.log("Failed:",a)},v=a=>{a?l.setFieldsValue({is_show:1}):l.setFieldsValue({is_show:0})};return e.jsxs("div",{className:"meedu-main-body",children:[e.jsx(k,{title:"编辑会员"}),h&&e.jsx("div",{className:"float-left text-center mt-30",children:e.jsx(V,{})}),e.jsx("div",{style:{display:h?"none":"block"},className:"float-left mt-30",children:e.jsxs(s,{form:l,name:"role-update",labelCol:{span:3},wrapperCol:{span:21},initialValues:{remember:!0},onFinish:w,onFinishFailed:I,autoComplete:"off",children:[e.jsx(s.Item,{label:"VIP名",name:"name",rules:[{required:!0,message:"请输入VIP名!"}],children:e.jsx(n,{style:{width:300},placeholder:"请输入VIP名",allowClear:!0})}),e.jsx(s.Item,{label:"天数",name:"expire_days",rules:[{required:!0,message:"请输入天数!"}],children:e.jsxs(m,{align:"baseline",style:{height:32},children:[e.jsx(s.Item,{name:"expire_days",rules:[{required:!0,message:"请输入天数!"}],children:e.jsx(n,{type:"number",style:{width:300},placeholder:"请输入天数",allowClear:!0})}),e.jsx("div",{className:"ml-10",children:e.jsx(d,{text:"决定用户购买VIP之后可享受的天数。"})})]})}),e.jsx(s.Item,{label:"价格",name:"charge",rules:[{required:!0,message:"请输入价格!"}],children:e.jsxs(m,{align:"baseline",style:{height:32},children:[e.jsx(s.Item,{name:"charge",rules:[{required:!0,message:"请输入价格!"}],children:e.jsx(n,{type:"number",style:{width:300},placeholder:"请输入价格",allowClear:!0})}),e.jsx("div",{className:"ml-10",children:e.jsx(d,{text:"请输入整数。不支持小数。"})})]})}),e.jsx(s.Item,{label:"显示",children:e.jsxs(m,{align:"baseline",style:{height:32},children:[e.jsx(s.Item,{name:"is_show",valuePropName:"checked",children:e.jsx(B,{onChange:v})}),e.jsx("div",{className:"ml-10",children:e.jsx(d,{text:"控制用户是否能够看到并购买该VIP"})})]})}),e.jsx(s.Item,{label:"描述",name:"description",rules:[{required:!0,message:"请输入描述!"}],children:e.jsx(n.TextArea,{style:{width:500,minHeight:120},placeholder:"一行一个描述",allowClear:!0,maxLength:200})})]})}),e.jsx("div",{className:"bottom-menus",children:e.jsxs("div",{className:"bottom-menus-box",children:[e.jsx("div",{children:e.jsx(p,{loading:x,type:"primary",onClick:()=>l.submit(),children:"保存"})}),e.jsx("div",{className:"ml-24",children:e.jsx(p,{type:"default",onClick:()=>u(-1),children:"取消"})})]})})]})};export{J as default};
