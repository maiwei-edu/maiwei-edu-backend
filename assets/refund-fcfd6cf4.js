import{u as N,r as a,t as C,j as e,E as T,m as k,M as E}from"./index-b4683d61.js";import{r as P,b}from"./tuangou-86f5d757.js";import{B as y}from"./index-5f967da4.js";import{P as z}from"./index-573a6ce5.js";import{T as B}from"./Table-76e623b5.js";import"./LeftOutlined-9e6e73a2.js";import"./addEventListener-a27ae3f4.js";import"./useIcons-e0af7133.js";import"./CheckOutlined-e6bc730e.js";import"./Pagination-d2c763c6.js";import"./useForceUpdate-f2aff5e0.js";import"./responsiveObserver-dc429d3b.js";import"./index-c09cc6d7.js";import"./index-10f1a096.js";import"./iconUtil-f3f90360.js";const{confirm:D}=E,W=()=>{const m=N(),[i,n]=a.useState(!1),[u,o]=a.useState([]),[r,c]=a.useState(1),[l,h]=a.useState(10),[f,p]=a.useState(0),[d,x]=a.useState(!1);a.useEffect(()=>{document.title="团购退款订单",m(C("团购退款订单"))},[]),a.useEffect(()=>{j()},[r,l,d]);const j=()=>{i||(n(!0),P({page:r,size:l}).then(s=>{o(s.data.data.data),p(s.data.data.total),n(!1)}).catch(s=>{n(!1)}))},g={current:r,pageSize:l,total:f,onChange:(s,t)=>_(s,t),showSizeChanger:!0},_=(s,t)=>{c(s),h(t)},v=[{title:"ID",width:80,render:(s,t)=>e.jsx("span",{children:t.id})},{title:"支付单号",render:(s,t)=>e.jsx("span",{children:t.oid})},{title:"支付方式",width:120,render:(s,t)=>e.jsx("span",{children:t.system_order.payment_text})},{title:"学员",width:300,render:(s,t)=>e.jsxs(e.Fragment,{children:[t.user&&e.jsxs("div",{className:"user-item d-flex",children:[e.jsx("div",{className:"avatar",children:e.jsx("img",{src:t.user.avatar,width:"40",height:"40"})}),e.jsx("div",{className:"ml-10",children:t.user.nick_name})]}),!t.user&&e.jsx("span",{className:"c-red",children:"学员不存在"})]})},{title:"价格",width:120,render:(s,t)=>e.jsxs("span",{children:["￥",t.charge]})},{title:"状态",width:100,render:(s,t)=>e.jsx("span",{children:t.status_text})},{title:"操作",width:100,render:(s,t)=>e.jsx(e.Fragment,{children:t.status==0&&e.jsx(z,{type:"link",text:"改为已处理",class:"c-red",icon:null,p:"addons.TuanGou.refund.handle",onClick:()=>{S(t.id)},disabled:null})})}],S=s=>{s!==0&&D({title:"警告",icon:e.jsx(T,{}),content:"确认操作？",centered:!0,okText:"确认",cancelText:"取消",onOk(){i||(n(!0),b(s,{id:s}).then(()=>{n(!1),k.success("成功"),w()}).catch(t=>{n(!1)}))},onCancel(){console.log("Cancel")}})},w=()=>{c(1),o([]),x(!d)};return e.jsxs("div",{className:"meedu-main-body",children:[e.jsx(y,{title:"团购商品退款订单"}),e.jsx("div",{className:"float-left mb-30 mt-30",children:e.jsx("div",{className:"float-left d-flex",children:e.jsx("div",{className:"d-flex",children:"请拿着支付订单号到相应的支付平台操作退款。"})})}),e.jsx("div",{className:"float-left",children:e.jsx(B,{loading:i,columns:v,dataSource:u,rowKey:s=>s.id,pagination:g})})]})};export{W as default};
