import{f as I,u as S,b as F,r as l,t as _,j as e,S as d,I as r,B as j,m as k}from"./index-3fd54424.js";import{a as q,u as V}from"./singlepage-a57d638c.js";import{B as T}from"./index-c3c15456.js";import{H as u}from"./index-d5d1e443.js";import{Q as B}from"./index-019b594b.js";import{F as s}from"./index-0ca68444.js";import{S as E}from"./index-27712364.js";import"./LeftOutlined-a0f8cfa6.js";import"./InfoCircleOutlined-fefc69ce.js";import"./index-749454db.js";import"./InboxOutlined-35d156a9.js";import"./selected-7e6221ce.js";import"./Dragger-3ad849c3.js";import"./useForceUpdate-56773729.js";import"./DeleteOutlined-529a4ffa.js";import"./CheckOutlined-44e74bd9.js";import"./row-98a37fbf.js";import"./responsiveObserver-a0dea2e5.js";import"./useIcons-235bc0cd.js";import"./Pagination-a2ebdf00.js";import"./index-ff4e3b6e.js";const te=()=>{const o=new URLSearchParams(I().search),g=S(),h=F(),[a]=s.useForm(),[x,c]=l.useState(!1),[n,p]=l.useState(!0),[f,w]=l.useState(""),[m,b]=l.useState(Number(o.get("id")));l.useEffect(()=>{document.title="编辑单页面",g(_("编辑单页面"))},[]),l.useEffect(()=>{b(Number(o.get("id"))),v()},[o.get("id")]);const v=()=>{m!==0&&q(m).then(t=>{var i=t.data;a.setFieldsValue({title:i.title,content:i.content,sign:i.sign,is_inherit:i.is_inherit,seo_description:i.seo_description,seo_keywords:i.seo_keywords}),w(i.content)})},C=t=>{x||(c(!0),V(m,t).then(i=>{c(!1),k.success("保存成功！"),h(-1)}).catch(i=>{c(!1)}))},N=t=>{console.log("Failed:",t)},y=t=>{t?a.setFieldsValue({is_inherit:1}):a.setFieldsValue({is_inherit:0})};return e.jsxs("div",{className:"meedu-main-body",children:[e.jsx(T,{title:"编辑单页面"}),e.jsx("div",{className:"float-left mt-30",children:e.jsxs(s,{form:a,name:"singlepage-create",labelCol:{span:3},wrapperCol:{span:21},initialValues:{remember:!0},onFinish:C,onFinishFailed:N,autoComplete:"off",children:[e.jsx(s.Item,{label:"页面标识",name:"sign",rules:[{required:!0,message:"请输入页面标识!"}],children:e.jsxs(d,{align:"baseline",style:{height:32},children:[e.jsx(s.Item,{name:"sign",rules:[{required:!0,message:"请输入页面标识!"}],children:e.jsx(r,{style:{width:300},placeholder:"请输入页面标识",allowClear:!0})}),e.jsx("div",{className:"ml-10",children:e.jsx(u,{text:"请填写英文字母+数字组合的一串字符串"})})]})}),e.jsx(s.Item,{label:"标题",name:"title",rules:[{required:!0,message:"请输入标题!"}],children:e.jsxs(d,{align:"baseline",style:{height:32},children:[e.jsx(s.Item,{name:"title",rules:[{required:!0,message:"请输入标题!"}],children:e.jsx(r,{style:{width:300},placeholder:"请输入标题",allowClear:!0})}),e.jsx("div",{className:"ml-10",children:e.jsx(u,{text:"指定该页面在浏览器标签栏显示的标题"})})]})}),e.jsx(s.Item,{label:"继承布局",name:"is_inherit",children:e.jsxs(d,{align:"baseline",style:{height:32},children:[e.jsx(s.Item,{name:"is_inherit",valuePropName:"checked",children:e.jsx(E,{onChange:y})}),e.jsx("div",{className:"ml-10",children:e.jsx(u,{text:"是否继承网站已有的布局（头部+导航栏+底部）"})})]})}),n&&e.jsx(s.Item,{label:"页面内容",name:"content",rules:[{required:!0,message:"请输入页面内容!"}],children:e.jsxs("div",{className:"c-flex w-800px",children:[e.jsx("div",{className:"changeContent ",onClick:()=>p(!n),children:"纯文本"}),e.jsx(s.Item,{name:"content",rules:[{required:!0,message:"请输入页面内容!"}],children:e.jsx(B,{mode:"",height:400,defautValue:f,isFormula:!1,setContent:t=>{a.setFieldsValue({content:t})}})})]})}),!n&&e.jsx(s.Item,{label:"页面内容",name:"content",rules:[{required:!0,message:"请输入页面内容!"}],children:e.jsxs("div",{className:"c-flex",children:[e.jsx("div",{className:"changeContent ",onClick:()=>p(!n),children:"富文本"}),e.jsx(s.Item,{name:"content",rules:[{required:!0,message:"请输入页面内容!"}],children:e.jsx(r.TextArea,{style:{width:800},placeholder:"请填写页面内容",allowClear:!0,rows:4})})]})}),e.jsx(s.Item,{label:"Seo关键字",name:"seo_keywords",children:e.jsx(r.TextArea,{style:{width:400},placeholder:"请填写Seo关键字",allowClear:!0,rows:4})}),e.jsx(s.Item,{label:"Seo描述",name:"seo_description",children:e.jsx(r.TextArea,{style:{width:400},placeholder:"请填写Seo描述",allowClear:!0,rows:4})})]})}),e.jsx("div",{className:"bottom-menus",children:e.jsxs("div",{className:"bottom-menus-box",children:[e.jsx("div",{children:e.jsx(j,{loading:x,type:"primary",onClick:()=>a.submit(),children:"保存"})}),e.jsx("div",{className:"ml-24",children:e.jsx(j,{type:"default",onClick:()=>h(-1),children:"取消"})})]})})]})};export{te as default};
