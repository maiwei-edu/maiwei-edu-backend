import{u as K,b as O,r as a,t as R,j as e,B as d,I as A,S,D as F,e as $,E as q,m as G,M as H}from"./index-b4683d61.js";import{l as J,c as Q,d as U}from"./mock-274446b7.js";import{P as p}from"./index-573a6ce5.js";import{S as V}from"./index-c09cc6d7.js";import{T as W}from"./Table-76e623b5.js";import"./useIcons-e0af7133.js";import"./CheckOutlined-e6bc730e.js";import"./addEventListener-a27ae3f4.js";import"./Pagination-d2c763c6.js";import"./LeftOutlined-9e6e73a2.js";import"./useForceUpdate-f2aff5e0.js";import"./responsiveObserver-dc429d3b.js";import"./index-10f1a096.js";import"./iconUtil-f3f90360.js";const{confirm:X}=H,me=()=>{const w=K(),i=O(),[m,n]=a.useState(!1),[P,u]=a.useState([]),[x,o]=a.useState(1),[h,g]=a.useState(20),[_,b]=a.useState(0),[c,f]=a.useState(!1),[j,k]=a.useState(""),[y,C]=a.useState([]),[v,N]=a.useState([]);a.useEffect(()=>{document.title="模拟试卷",w(R("模拟试卷")),E()},[]),a.useEffect(()=>{D()},[x,h,c]);const D=()=>{m||(n(!0),J({page:x,size:h,sort:"id",order:"desc",keywords:j,category_id:y}).then(t=>{u(t.data.data),b(t.data.total),n(!1)}).catch(t=>{n(!1)}))},E=()=>{Q({}).then(t=>{let s=t.data.categories;const l=[];for(let r=0;r<s.length;r++)l.push({label:s[r].name,value:s[r].id});N(l)})},z=()=>{o(1),g(20),u([]),k(""),C([]),f(!c)},T={current:x,pageSize:h,total:_,onChange:(t,s)=>L(t,s),showSizeChanger:!0},L=(t,s)=>{o(t),g(s)},B=[{title:"分类",width:200,render:(t,s)=>{var l;return e.jsx("span",{children:((l=s==null?void 0:s.category)==null?void 0:l.name)||"-"})}},{title:"标题",width:500,render:(t,s)=>e.jsx("span",{children:s.title})},{title:"及格",width:150,render:(t,s)=>e.jsxs("span",{className:"c-red",children:[s.pass_score,"分"]})},{title:"时长",render:(t,s)=>e.jsxs("span",{children:[s.expired_minutes,"m"]})},{title:"操作",width:140,fixed:"right",render:(t,s)=>{const l=[{key:"1",label:e.jsx(p,{type:"link",text:"编辑",class:"c-primary",icon:null,p:"addons.Paper.mock_paper.update",onClick:()=>{i("/exam/mockpaper/update?id="+s.id)},disabled:null})},{key:"2",label:e.jsx(p,{type:"link",text:"删除",class:"c-red",icon:null,p:"addons.Paper.mock_paper.delete",onClick:()=>{M(s.id)},disabled:null})}];return e.jsxs(S,{children:[e.jsx(p,{type:"link",text:"学员",class:"c-primary",icon:null,p:["addons.Paper.mock_paper.records","addons.Paper.mock_paper.statistics","addons.Paper.mock_paper.users"],onClick:()=>{i("/exam/mockpaper/user?id="+s.id)},disabled:null}),e.jsx(F,{menu:{items:l},children:e.jsx(d,{type:"link",className:"c-primary",onClick:r=>r.preventDefault(),children:e.jsxs(S,{size:"small",align:"center",children:["更多",e.jsx($,{})]})})})]})}}],I=()=>{o(1),u([]),f(!c)},M=t=>{t!==0&&X({title:"操作确认",icon:e.jsx(q,{}),content:"确认删除此模拟卷？",centered:!0,okText:"确认",cancelText:"取消",onOk(){m||(n(!0),U(t).then(()=>{n(!1),G.success("删除成功"),I()}).catch(s=>{n(!1)}))},onCancel(){console.log("Cancel")}})};return e.jsxs("div",{className:"meedu-main-body",children:[e.jsxs("div",{className:"float-left j-b-flex mb-30",children:[e.jsxs("div",{className:"d-flex",children:[e.jsx(p,{type:"primary",text:"新建模拟卷",class:"",icon:null,p:"addons.Paper.mock_paper.store",onClick:()=>i("/exam/mockpaper/create"),disabled:null}),e.jsx(d,{type:"primary",className:"ml-10",onClick:()=>i("/exam/paper/category/index"),children:"分类管理"})]}),e.jsxs("div",{className:"d-flex",children:[e.jsx(A,{value:j,onChange:t=>{k(t.target.value)},allowClear:!0,style:{width:150},placeholder:"模拟试卷关键字"}),e.jsx(V,{style:{width:150,marginLeft:10},value:y,onChange:t=>{C(t)},allowClear:!0,placeholder:"分类",options:v}),e.jsx(d,{className:"ml-10",onClick:z,children:"清空"}),e.jsx(d,{className:"ml-10",type:"primary",onClick:()=>{o(1),f(!c)},children:"筛选"})]})]}),e.jsx("div",{className:"float-left",children:e.jsx(W,{loading:m,columns:B,dataSource:P,rowKey:t=>t.id,pagination:T})})]})};export{me as default};
