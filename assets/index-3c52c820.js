import{f as C,u as P,b as _,r as a,t as E,j as e,S as N,m as h,E as R,M as v}from"./index-3fd54424.js";import{h as L,i as B}from"./practice-c882748e.js";import{B as D}from"./index-c3c15456.js";import{P as c}from"./index-df05a090.js";import{T}from"./Table-59a53b18.js";import"./LeftOutlined-a0f8cfa6.js";import"./addEventListener-1752243f.js";import"./useIcons-235bc0cd.js";import"./CheckOutlined-44e74bd9.js";import"./Pagination-a2ebdf00.js";import"./useForceUpdate-56773729.js";import"./responsiveObserver-a0dea2e5.js";import"./index-ff4e3b6e.js";import"./index-a56efb1a.js";import"./iconUtil-14ff0944.js";const{confirm:q}=v,Y=()=>{const n=new URLSearchParams(C().search),f=P(),o=_(),[l,i]=a.useState(!1),[x,p]=a.useState([]),[m,g]=a.useState(!1),[r,j]=a.useState(Number(n.get("id"))),[d,u]=a.useState([]);a.useEffect(()=>{document.title="练习章节",f(E("练习章节"))},[]),a.useEffect(()=>{j(Number(n.get("id")))},[n.get("id")]),a.useEffect(()=>{y()},[r,m]);const y=()=>{l||(i(!0),L({pid:r}).then(t=>{p(t.data.data),i(!1)}).catch(t=>{i(!1)}))},S=()=>{p([]),u([]),g(!m)},b=[{title:"排序",width:120,render:(t,s)=>e.jsx("span",{children:s.sort})},{title:"章节名",render:(t,s)=>e.jsx("span",{children:s.name})},{title:"题目数",width:120,render:(t,s)=>e.jsxs("span",{children:[s.question_count,"个"]})},{title:"操作",width:140,fixed:"right",render:(t,s)=>e.jsxs(N,{children:[e.jsx(c,{type:"link",text:"章节组卷",class:"c-primary",icon:null,p:"addons.Paper.practice_chapter.questions",onClick:()=>{o("/exam/practice/chapter/question/index?id="+s.id)},disabled:null}),e.jsx(c,{type:"link",text:"编辑",class:"c-primary",icon:null,p:"addons.Paper.practice_chapter.update",onClick:()=>{o("/exam/practice/chapter/update?id="+s.id+"&pid="+r)},disabled:null})]})}],k={selectedRowKeys:d,onChange:(t,s)=>{u(t)}},w=()=>{if(d.length===0){h.error("请选择需要操作的数据");return}q({title:"操作确认",icon:e.jsx(R,{}),content:"确认删除选中的章节？",centered:!0,okText:"确认",cancelText:"取消",onOk(){l||(i(!0),B({ids:d}).then(()=>{h.success("成功"),S(),i(!1)}).catch(t=>{i(!1)}))},onCancel(){console.log("Cancel")}})};return e.jsxs("div",{className:"meedu-main-body",children:[e.jsx(D,{title:"练习章节"}),e.jsxs("div",{className:"float-left mb-30 mt-30",children:[e.jsx(c,{type:"primary",text:"添加章节",class:"",icon:null,p:"addons.Paper.practice_chapter.store",onClick:()=>o("/exam/practice/chapter/create?pid="+r),disabled:null}),e.jsx(c,{type:"danger",text:"批量删除",class:"ml-10",icon:null,p:"addons.Paper.practice_chapter.delete",onClick:()=>w(),disabled:null})]}),e.jsx("div",{className:"float-left",children:e.jsx(T,{rowSelection:{type:"checkbox",...k},loading:l,columns:b,dataSource:x,rowKey:t=>t.id,pagination:!1})})]})};export{Y as default};
