import{u as f,b as g,r as c,t as j,cx as b,j as e,g as w,I as r,B as p,cy as v,m as y}from"./index-3fd54424.js";import{B as F}from"./index-c3c15456.js";import{F as o}from"./index-0ca68444.js";import"./LeftOutlined-a0f8cfa6.js";import"./row-98a37fbf.js";import"./responsiveObserver-a0dea2e5.js";const S=()=>{const u=f(),d=g(),[i]=o.useForm(),[n,a]=c.useState(!0);c.useEffect(()=>{document.title="微信小程序",u(j("微信小程序")),m()},[]);const m=()=>{b().then(s=>{let t=s.data.微信小程序;for(let l in t)t[l].key==="meedu.addons.TemplateOne.wechat_mini.app_id"?i.setFieldsValue({"meedu.addons.TemplateOne.wechat_mini.app_id":t[l].value}):t[l].key==="meedu.addons.TemplateOne.wechat_mini.secret"&&i.setFieldsValue({"meedu.addons.TemplateOne.wechat_mini.secret":t[l].value});a(!1)}).catch(s=>{a(!1)})},h=s=>{n||(a(!0),v({config:s}).then(t=>{a(!1),y.success("成功！"),m(),d(-1)}).catch(t=>{a(!1)}))},x=s=>{console.log("Failed:",s)};return e.jsxs("div",{className:"meedu-main-body",children:[e.jsx(F,{title:"微信小程序"}),n&&e.jsx("div",{style:{width:"100%",textAlign:"center",paddingTop:50,paddingBottom:30,boxSizing:"border-box"},children:e.jsx(w,{})}),!n&&e.jsx("div",{className:"float-left mt-30",children:e.jsxs(o,{form:i,name:"system-wechatmini-config",labelCol:{span:3},wrapperCol:{span:21},initialValues:{remember:!0},onFinish:h,onFinishFailed:x,autoComplete:"off",children:[e.jsx(o.Item,{label:"AppId",name:"meedu.addons.TemplateOne.wechat_mini.app_id",children:e.jsx(r,{style:{width:300},allowClear:!0})}),e.jsx(o.Item,{label:"Secret",name:"meedu.addons.TemplateOne.wechat_mini.secret",children:e.jsx(r,{style:{width:300},allowClear:!0})})]})}),e.jsx("div",{className:"bottom-menus",children:e.jsxs("div",{className:"bottom-menus-box",children:[e.jsx("div",{children:e.jsx(p,{loading:n,type:"primary",onClick:()=>i.submit(),children:"保存"})}),e.jsx("div",{className:"ml-24",children:e.jsx(p,{type:"default",onClick:()=>d(-1),children:"取消"})})]})})]})};export{S as default};
