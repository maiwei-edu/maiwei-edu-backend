import{u as w,b as y,f as b,r as a,t as C,j as e,E,m as k,M as v}from"./index-b4683d61.js";import{w as N,x as S}from"./course-7dc1c12e.js";import{B as D}from"./index-5f967da4.js";import{P as d}from"./index-573a6ce5.js";import{T as L}from"./Table-76e623b5.js";import"./LeftOutlined-9e6e73a2.js";import"./addEventListener-a27ae3f4.js";import"./useIcons-e0af7133.js";import"./CheckOutlined-e6bc730e.js";import"./Pagination-d2c763c6.js";import"./useForceUpdate-f2aff5e0.js";import"./responsiveObserver-dc429d3b.js";import"./index-c09cc6d7.js";import"./index-10f1a096.js";import"./iconUtil-f3f90360.js";const{confirm:B}=v,Q=()=>{const u=w(),m=y(),i=new URLSearchParams(b().search),[o,r]=a.useState(!1),[f,n]=a.useState([]),[l,p]=a.useState(!1),[c,h]=a.useState(Number(i.get("course_id")));a.useEffect(()=>{document.title="课程附件管理",u(C("课程附件管理"))},[]),a.useEffect(()=>{h(Number(i.get("course_id")))},[i.get("course_id")]),a.useEffect(()=>{x()},[c,l]);const x=()=>{o||(r(!0),N({course_id:c}).then(t=>{n(t.data.data),r(!1)}).catch(t=>{r(!1)}))},j=[{title:"ID",width:120,render:(t,s)=>e.jsx("span",{children:s.id})},{title:"附件名",render:(t,s)=>e.jsx("span",{children:s.name})},{title:"路径",width:500,render:(t,s)=>e.jsx("span",{children:s.path})},{title:"下载次数",width:150,render:(t,s)=>e.jsxs("span",{children:[s.download_times,"次"]})},{title:"操作",width:100,fixed:"right",render:(t,s)=>e.jsx(d,{type:"link",text:"删除",class:"c-red",icon:null,p:"course_attach.destroy",onClick:()=>{g(s.id)},disabled:null})}],g=t=>{t!==0&&B({title:"操作确认",icon:e.jsx(E,{}),content:"确认删除此附件？",centered:!0,okText:"确认",cancelText:"取消",onOk(){o||(r(!0),S(t).then(()=>{r(!1),k.success("删除成功"),_()}).catch(s=>{r(!1)}))},onCancel(){console.log("Cancel")}})},_=()=>{n([]),p(!l)};return e.jsxs("div",{className:"meedu-main-body",children:[e.jsx(D,{title:"课程附件管理"}),e.jsx("div",{className:"float-left mt-30",children:e.jsx(d,{type:"primary",text:"添加",class:"",icon:null,p:"course_attach.store",onClick:()=>m("/course/vod/attach/create?course_id="+c),disabled:null})}),e.jsx("div",{className:"float-left mt-30",children:e.jsx(L,{loading:o,columns:j,dataSource:f,rowKey:t=>t.id,pagination:!1})})]})};export{Q as default};
