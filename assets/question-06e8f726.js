import{f as X,u as Y,b as Z,r as s,t as $,j as t,B as P,m as _,E as ee,M as te}from"./index-3fd54424.js";import{q as se,n as ae}from"./practice-c882748e.js";import{B as oe}from"./index-c3c15456.js";import{P as k}from"./index-df05a090.js";import{Q as le}from"./index-5ce7603a.js";import{S as x}from"./index-ff4e3b6e.js";import{T as ne}from"./Table-59a53b18.js";import"./LeftOutlined-a0f8cfa6.js";import"./useIcons-235bc0cd.js";import"./CheckOutlined-44e74bd9.js";import"./addEventListener-1752243f.js";import"./Pagination-a2ebdf00.js";import"./useForceUpdate-56773729.js";import"./responsiveObserver-a0dea2e5.js";import"./index-a56efb1a.js";import"./iconUtil-14ff0944.js";const{confirm:ie}=te,be=()=>{const r=new URLSearchParams(X().search),q=Y(),E=Z(),[c,l]=s.useState(!1),[R,d]=s.useState([]),[u,p]=s.useState(1),[m,f]=s.useState(20),[T,B]=s.useState(0),[n,h]=s.useState(!1),[i,z]=s.useState(Number(r.get("id"))),[g,y]=s.useState([]),[S,j]=s.useState([]),[D,K]=s.useState([]),[v,C]=s.useState([]),[M,Q]=s.useState([]),[w,b]=s.useState([]),[I,A]=s.useState([]);s.useEffect(()=>{document.title="章节组卷",q($("章节组卷"))},[]),s.useEffect(()=>{z(Number(r.get("id")))},[r.get("id")]),s.useEffect(()=>{F()},[i,u,m,n]);const F=()=>{c||(l(!0),se(i,{page:u,size:m,category_id:S,type:v,level:w}).then(e=>{d(e.data.data.data),B(e.data.data.total);let a=[];e.data.categories.length>0&&e.data.categories.map(o=>{a.push({label:o.name,value:o.id})}),K(a);let L=[];e.data.types.length>0&&e.data.types.map(o=>{L.push({label:o.name,value:o.id})}),Q(L);let N=[];e.data.levels.length>0&&e.data.levels.map(o=>{N.push({label:o.name,value:o.id})}),A(N),l(!1)}).catch(e=>{l(!1)}))},O=()=>{p(1),f(20),d([]),C([]),j([]),b([]),h(!n)},U=()=>{d([]),y([]),h(!n)},G=[{title:"分类",width:200,render:(e,a)=>t.jsx("span",{children:a.category_name})},{title:"类型",width:120,render:(e,a)=>t.jsx("span",{children:a.type_text})},{title:"难度",width:120,render:(e,a)=>t.jsx("span",{children:a.level_text})},{title:"内容",render:(e,a)=>t.jsx(le,{question:a})}],H={selectedRowKeys:g,onChange:(e,a)=>{y(e)}},J=()=>{if(g.length===0){_.error("请选择需要操作的数据");return}ie({title:"操作确认",icon:t.jsx(ee,{}),content:"确认删除选中的试题？",centered:!0,okText:"确认",cancelText:"取消",onOk(){c||(l(!0),ae(i,{qids:g}).then(()=>{_.success("成功"),U(),l(!1)}).catch(e=>{l(!1)}))},onCancel(){console.log("Cancel")}})},V={current:u,pageSize:m,total:T,onChange:(e,a)=>W(e,a),showSizeChanger:!0},W=(e,a)=>{p(e),f(a)};return t.jsxs("div",{className:"meedu-main-body",children:[t.jsx(oe,{title:"章节组卷"}),t.jsxs("div",{className:"float-left j-b-flex mb-30 mt-30",children:[t.jsxs("div",{className:"d-flex",children:[t.jsx(k,{type:"primary",text:"添加试题",class:"",icon:null,p:"addons.Paper.practice_chapter.questions.store",onClick:()=>E("/exam/practice/chapter/question/create?id="+i),disabled:null}),t.jsx(k,{type:"danger",text:"批量删除",class:"ml-10",icon:null,p:"addons.Paper.practice_chapter.questions.delete",onClick:()=>J(),disabled:null})]}),t.jsxs("div",{className:"d-flex",children:[t.jsx(x,{style:{width:150},value:S,onChange:e=>{j(e)},allowClear:!0,placeholder:"分类",options:D}),t.jsx(x,{style:{width:150,marginLeft:10},value:v,onChange:e=>{C(e)},allowClear:!0,placeholder:"类型",options:M}),t.jsx(x,{style:{width:150,marginLeft:10},value:w,onChange:e=>{b(e)},allowClear:!0,placeholder:"难度",options:I}),t.jsx(P,{className:"ml-10",onClick:O,children:"清空"}),t.jsx(P,{className:"ml-10",type:"primary",onClick:()=>{p(1),h(!n)},children:"筛选"})]})]}),t.jsx("div",{className:"float-left",children:t.jsx(ne,{rowSelection:{type:"checkbox",...H},loading:c,columns:G,dataSource:R,rowKey:e=>e.id,pagination:V})})]})};export{be as default};
