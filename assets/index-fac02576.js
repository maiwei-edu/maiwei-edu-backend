import{r as s,ck as z,j as a,cl as I,cm as C,cn as P,B as k,u as _,a as v,t as T}from"./index-b4683d61.js";import{T as w}from"./Table-76e623b5.js";import{R as L}from"./index-10f1a096.js";import"./addEventListener-a27ae3f4.js";import"./useIcons-e0af7133.js";import"./CheckOutlined-e6bc730e.js";import"./Pagination-d2c763c6.js";import"./LeftOutlined-9e6e73a2.js";import"./useForceUpdate-f2aff5e0.js";import"./responsiveObserver-dc429d3b.js";import"./index-c09cc6d7.js";import"./iconUtil-f3f90360.js";const b=()=>{const[d,r]=s.useState(!1),[u,l]=s.useState([]),[o,c]=s.useState(1),[i,n]=s.useState(10),[p,g]=s.useState(0),[m,y]=s.useState(!1);s.useEffect(()=>{f()},[o,i,m]);const f=()=>{d||(r(!0),z({page:o,size:i}).then(e=>{l(e.data.data),g(e.data.total),r(!1)}).catch(e=>{r(!1)}))},x={current:o,pageSize:i,total:p,onChange:(e,t)=>S(e,t),showSizeChanger:!0},S=(e,t)=>{c(e),n(t)},j=[{title:"管理员ID",width:100,render:(e,t)=>a.jsx("span",{children:t.admin_id})},{title:"操作模块",width:100,dataIndex:"module",render:e=>a.jsx("span",{children:e})},{title:"操作指令",width:100,dataIndex:"opt",render:e=>a.jsx("span",{children:e})},{title:"IP",width:200,dataIndex:"ip",render:e=>a.jsx("span",{children:e})},{title:"时间",width:200,dataIndex:"created_at",render:e=>a.jsx("span",{children:I(e)})},{title:"备注",dataIndex:"version",ellipsis:!0,render:(e,t)=>a.jsx("code",{children:t.remark})}];return a.jsx(a.Fragment,{children:a.jsx(w,{loading:d,columns:j,dataSource:u,rowKey:e=>e.id,pagination:x})})},D=()=>{const[d,r]=s.useState(!1),[u,l]=s.useState([]),[o,c]=s.useState(1),[i,n]=s.useState(10),[p,g]=s.useState(0),[m,y]=s.useState(!1);s.useEffect(()=>{f()},[o,i,m]);const f=()=>{d||(r(!0),C({page:o,size:i}).then(e=>{l(e.data.data),g(e.data.total),r(!1)}).catch(e=>{r(!1)}))},x={current:o,pageSize:i,total:p,onChange:(e,t)=>S(e,t),showSizeChanger:!0},S=(e,t)=>{c(e),n(t)},j=[{title:"ID",width:100,render:(e,t)=>a.jsx("span",{children:t.id})},{title:"学员昵称",width:300,dataIndex:"user",render:(e,t)=>a.jsx("span",{children:t.user.nick_name})},{title:"UA",dataIndex:"ua",render:e=>a.jsx("span",{children:e})},{title:"IP",width:200,dataIndex:"ip",render:e=>a.jsx("span",{children:e})},{title:"登录时间",width:200,dataIndex:"created_at",render:e=>a.jsx("span",{children:I(e)})}];return a.jsx(a.Fragment,{children:a.jsx(w,{loading:d,columns:j,dataSource:u,rowKey:e=>e.id,pagination:x})})},E=()=>{const[d,r]=s.useState(!1),[u,l]=s.useState([]),[o,c]=s.useState(1),[i,n]=s.useState(10),[p,g]=s.useState(0),[m,y]=s.useState(!1);s.useEffect(()=>{f()},[o,i,m]);const f=()=>{d||(r(!0),P({page:o,size:i}).then(t=>{l(t.data.data),g(t.data.total),r(!1)}).catch(t=>{r(!1)}))},x={current:o,pageSize:i,total:p,onChange:(t,h)=>S(t,h),showSizeChanger:!0},S=(t,h)=>{c(t),n(h)},j=[{title:"ID",width:100,render:(t,h)=>a.jsx("span",{children:h.id})},{title:"名称",dataIndex:"name",render:t=>a.jsx("span",{children:t})},{title:"上传时间",width:300,dataIndex:"created_at",render:t=>a.jsx("span",{children:I(t)})},{title:"操作",width:100,render:(t,h)=>a.jsx(k,{type:"link",size:"small",className:"b-n-link c-primary",onClick:()=>{e(h.visit_url)},children:"查看"})}],e=t=>{window.open(t)};return a.jsx(a.Fragment,{children:a.jsx(w,{loading:d,columns:j,dataSource:u,rowKey:t=>t.id,pagination:x})})},J=()=>{const d=_();s.useState(!1),s.useState([]);const[r,u]=s.useState([]),[l,o]=s.useState("admin"),c=v(n=>n.loginUser.value.user);s.useEffect(()=>{document.title="系统日志",d(T("系统日志"))},[]),s.useEffect(()=>{let n=[];i("system.log.admin")&&n.push({name:"管理后台日志",key:"admin"}),i("system.log.userLogin")&&n.push({name:"学员登录日志",key:"userLogin"}),i("system.log.uploadImages")&&n.push({name:"图片上传日志",key:"uploadImages"}),u(n)},[c]);const i=n=>typeof c.permissions[n]<"u";return a.jsxs("div",{className:"meedu-main-body",children:[a.jsx("div",{className:"float-left",children:a.jsx(L.Group,{size:"large",defaultValue:l,buttonStyle:"solid",onChange:n=>{console.log(n.target.value),o(n.target.value)},children:r.length>0&&r.map(n=>a.jsx(L.Button,{value:n.key,children:n.name},n.key))})}),a.jsxs("div",{className:"float-left mt-30",children:[l==="admin"&&a.jsx(b,{}),l==="userLogin"&&a.jsx(D,{}),l==="uploadImages"&&a.jsx(E,{})]})]})};export{J as default};
