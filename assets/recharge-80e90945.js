import{u as z,r as a,t as A,j as e,I as E,B as _,d as O}from"./index-b4683d61.js";import{c as T}from"./order-8405cf8c.js";import{S as Y}from"./index-c09cc6d7.js";import{T as B}from"./Table-76e623b5.js";import{D as M}from"./index-cc7d88a3.js";import"./useIcons-e0af7133.js";import"./CheckOutlined-e6bc730e.js";import"./addEventListener-a27ae3f4.js";import"./Pagination-d2c763c6.js";import"./LeftOutlined-9e6e73a2.js";import"./useForceUpdate-f2aff5e0.js";import"./responsiveObserver-dc429d3b.js";import"./index-10f1a096.js";import"./iconUtil-f3f90360.js";const{RangePicker:K}=M,ae=()=>{const S=z(),[c,r]=a.useState(!1),[v,o]=a.useState([]),[i,n]=a.useState(1),[l,h]=a.useState(10),[w,N]=a.useState(0),[d,m]=a.useState(!1),[u,p]=a.useState(""),[x,j]=a.useState(-1),[C,g]=a.useState([]),[D,f]=a.useState([]),[I,b]=a.useState(""),y=[{value:-1,label:"全部"},{value:0,label:"未支付"},{value:1,label:"已支付"}];a.useEffect(()=>{document.title="iOS充值",S(A("iOS充值"))},[]),a.useEffect(()=>{P()},[i,l,d]);const P=()=>{c||(r(!0),T({page:i,size:l,user_id:u,is_paid:x,created_at:C}).then(s=>{o(s.data.data),N(s.data.total),b(s.data.credit2_name),r(!1)}).catch(s=>{r(!1)}))},k=()=>{n(1),h(10),o([]),p(""),j(-1),f([]),g([]),m(!d)},F={current:i,pageSize:l,total:w,onChange:(s,t)=>L(s,t),showSizeChanger:!0},L=(s,t)=>{n(s),h(t)},R=[{title:"ID",width:60,render:(s,t)=>e.jsx("span",{children:t.id})},{title:"学员ID",width:100,dataIndex:"user_id",render:s=>e.jsx("span",{children:s})},{title:"学员",width:250,render:(s,t)=>e.jsxs(e.Fragment,{children:[t.user&&e.jsxs("div",{className:"user-item d-flex",children:[e.jsx("div",{className:"avatar",children:e.jsx("img",{src:t.user.avatar,width:"40",height:"40"})}),e.jsx("div",{className:"ml-10",children:t.user.nick_name})]}),!t.user&&e.jsx("span",{className:"c-red",children:"学员不存在"})]})},{title:"TransactionID",width:200,render:(s,t)=>e.jsx("span",{children:t.transaction_id})},{title:"商品",render:(s,t)=>e.jsxs(e.Fragment,{children:[t.product&&e.jsxs("span",{children:[t.product.amount,I]}),!t.product&&e.jsx("span",{className:"c-red",children:"无商品"})]})},{title:"数量",width:100,render:(s,t)=>e.jsx("span",{children:t.goods_count})},{title:"实际支付",width:150,render:(s,t)=>e.jsxs(e.Fragment,{children:[t.product&&e.jsxs("span",{children:[t.product.charge*t.goods_count,"元"]}),!t.product&&e.jsx("span",{children:"0元"})]})},{title:"状态",width:100,render:(s,t)=>e.jsxs(e.Fragment,{children:[t.is_paid===1&&e.jsx("span",{className:"c-green",children:"· 已支付"}),t.is_paid!==1&&e.jsx("span",{className:"c-red",children:"· 未支付"})]})},{title:"时间",width:200,dataIndex:"created_at",render:s=>e.jsx("span",{children:O(s)})}];return e.jsxs("div",{className:"meedu-main-body",children:[e.jsx("div",{className:"float-left j-b-flex mb-30",children:e.jsxs("div",{className:"d-flex",children:[e.jsx(E,{value:u,onChange:s=>{p(s.target.value)},allowClear:!0,style:{width:150},placeholder:"学员ID"}),e.jsx(Y,{style:{width:150,marginLeft:10},value:x,onChange:s=>{j(s)},allowClear:!0,placeholder:"状态",options:y}),e.jsx(K,{format:"YYYY-MM-DD",value:D,style:{marginLeft:10},onChange:(s,t)=>{t[1]+=" 23:59:59",g(t),f(s)},placeholder:["开始日期","结束日期"]}),e.jsx(_,{className:"ml-10",onClick:k,children:"清空"}),e.jsx(_,{className:"ml-10",type:"primary",onClick:()=>{n(1),m(!d)},children:"筛选"})]})}),e.jsx("div",{className:"float-left",children:e.jsx(B,{loading:c,columns:R,dataSource:v,rowKey:s=>s.id,pagination:F})})]})};export{ae as default};
