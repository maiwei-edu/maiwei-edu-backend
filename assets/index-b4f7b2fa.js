import{r as o,u as I,h,t as H,j as e}from"./index-b4683d61.js";import{t as K,c as W,a as q,D as S}from"./index-9275dfb9.js";import{i as B}from"./index-305edcd4.js";const J="_el_content_9op3n_1",Q="_el_top_row1_9op3n_9",U="_el_row_item_9op3n_16",V="_item_title_9op3n_30",X="_item_info_9op3n_52",Z="_el_row_item2_9op3n_75",$="_el_item_9op3n_83",ee="_el_item_num_9op3n_112",te="_el_item_increase_9op3n_120",se="_el_top_row2_9op3n_130",ae="_el_row_left_9op3n_139",ne="_header_9op3n_153",ie="_icon_9op3n_173",oe="_controls_9op3n_178",re="_tit_9op3n_205",_e="_num_9op3n_223",de="_info_9op3n_232",ce="_el_row_right_9op3n_253",le="_el_row_right_item_9op3n_259",me="_none_9op3n_314",pe="_el_top_row3_9op3n_355",ue="_title_9op3n_376",he="_charts_9op3n_383",s={el_content:J,el_top_row1:Q,el_row_item:U,item_title:V,item_info:X,el_row_item2:Z,el_item:$,el_item_num:ee,el_item_increase:te,el_top_row2:se,el_row_left:ae,header:ne,icon:ie,controls:oe,"data-box":"_data-box_9op3n_184","row-line":"_row-line_9op3n_192","data-item":"_data-item_9op3n_198",tit:re,num:_e,"info-t":"_info-t_9op3n_232",info:de,el_row_right:ce,el_row_right_item:le,"top-list":"_top-list_9op3n_308",none:me,"list-item":"_list-item_9op3n_325","list-item-name":"_list-item-name_9op3n_336","list-item-sum":"_list-item-sum_9op3n_347",el_top_row3:pe,title:ue,charts:he},ge=()=>{let f=o.useRef(null);const D=I(),[Y,y]=o.useState(!1),[N,M]=o.useState(1),[v,ye]=o.useState(5),[xe,F]=o.useState(0),[t,T]=o.useState([]),[g,L]=o.useState(h().format("YYYY-MM-DD")),[w,P]=o.useState(h().add(1,"days").format("YYYY-MM-DD")),[x,C]=o.useState([]),[je,z]=o.useState([]);o.useEffect(()=>(document.title="交易数据",D(H("交易数据")),A(),b(h().subtract(6,"days").format("YYYY-MM-DD"),h().add(1,"days").format("YYYY-MM-DD")),()=>{window.onresize=null}),[]),o.useEffect(()=>{O()},[N,v,g,w]);const A=()=>{K({}).then(a=>{T(a.data)})},_=a=>a?Number(a).toLocaleString():0,d=a=>a>=1e8?(a/1e8).toFixed(2)+"亿":a>=1e7?(a/1e7).toFixed(2)+"千万":a>=1e6?(a/1e6).toFixed(2)+"百万":a>=1e4?(a/1e4).toFixed(2)+"万":a,n=(a,i)=>{if(typeof a!="number"||typeof i!="number"||a===0)return 0;if(i===0)return 100;let r=((a-i)/i).toFixed(2);return Math.floor(r*100)},c=()=>{if(typeof t.today_paid_sum!="number"||typeof t.today_paid_user_count!="number"||t.today_paid_user_count===0)return 0;let a=t.today_paid_sum/t.today_paid_user_count;return parseInt(a)},l=()=>{if(typeof t.yesterday_paid_sum!="number"||typeof t.yesterday_paid_user_count!="number"||t.yesterday_paid_user_count===0)return 0;let a=t.yesterday_paid_sum/t.yesterday_paid_user_count;return parseInt(a)},m=()=>{if(typeof t.today_paid_count!="number"||typeof t.today_count!="number"||t.today_count===0)return 0;let a=(t.today_paid_count/t.today_count).toFixed(2);return Math.floor(a*100)},p=()=>{if(typeof t.yesterday_paid_count!="number"||typeof t.yesterday_count!="number"||t.yesterday_count===0)return 0;let a=(t.yesterday_paid_count/t.yesterday_count).toFixed(2);return Math.floor(a*100)},E=a=>{M(a)},G=(a,i)=>{L(a),P(i),E(1)},O=()=>{W({start_at:g,end_at:w,page:N,size:v}).then(a=>{C(a.data.data),F(a.data.total)})},b=(a,i)=>Y?void 0:(y(!0),q({start_at:a,end_at:i}).then(j=>{z(j.data),k(j.data),y(!1)}).catch(j=>{y(!1)}),()=>{window.onresize=null}),R=a=>{var i=[];for(let r in a)i.push(r);return i},u=a=>Object.values(a),k=a=>{let i=f.current,r=B(i);r.setOption({tooltip:{trigger:"axis"},legend:{data:["支付金额","支付订单数","支付人数","客单均价"],x:"right"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:R(a.paid_sum)},yAxis:{type:"value"},series:[{name:"支付金额",type:"line",data:u(a.paid_sum)},{name:"支付订单数",type:"line",data:u(a.paid_count)},{name:"支付人数",type:"line",data:u(a.paid_user_count)},{name:"客单均价",type:"line",data:u(a.paid_avg_charge)}]}),window.onresize=()=>{r.resize()}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:s.el_content,children:[e.jsxs("div",{className:s.el_top_row1,children:[e.jsxs("div",{className:s.el_row_item,children:[e.jsx("span",{className:s.item_title,children:"今日收入(元)"}),e.jsx("p",{children:_(t.today_paid_sum||0)}),e.jsxs("div",{className:s.item_info,children:[e.jsxs("span",{children:["昨日：",d(t.yesterday_paid_sum)]}),e.jsxs("span",{children:["较昨日：",n(t.today_paid_sum,t.yesterday_paid_sum)<0&&e.jsxs("strong",{className:"c-danger",children:[n(t.today_paid_sum,t.yesterday_paid_sum),"%"]}),n(t.today_paid_sum,t.yesterday_paid_sum)>=0&&e.jsxs("strong",{children:[n(t.today_paid_sum,t.yesterday_paid_sum),"%"]})]}),e.jsxs("span",{children:["退款金额：",e.jsx("strong",{className:"c-danger",children:t.today_refund_sum})]})]})]}),e.jsxs("div",{className:s.el_row_item,children:[e.jsx("span",{className:s.item_title,children:"今日支付订单数"}),e.jsx("p",{children:_(t.today_paid_count||0)}),e.jsxs("div",{className:s.item_info,children:[e.jsxs("span",{children:["昨日：",d(t.yesterday_paid_count)]}),e.jsxs("span",{children:["较昨日：",n(t.today_paid_count,t.yesterday_paid_count)<0&&e.jsxs("strong",{className:"c-danger",children:[n(t.today_paid_count,t.yesterday_paid_count),"%"]}),n(t.today_paid_count,t.yesterday_paid_count)>=0&&e.jsxs("strong",{children:[n(t.today_paid_count,t.yesterday_paid_count),"%"]})]}),e.jsxs("span",{children:["退款订单数：",e.jsx("strong",{className:"c-danger",children:t.today_refund_count})]})]})]}),e.jsxs("div",{className:s.el_row_item2,children:[e.jsxs("div",{className:s.el_item,children:[e.jsxs("div",{className:s.item_title,children:[e.jsx("span",{children:"客单均价(元)"}),e.jsx("span",{className:s.el_item_num,children:c()})]}),e.jsxs("span",{className:s.el_item_increase,children:["昨日：",l()]}),e.jsxs("span",{className:s.el_item_increase,children:["较昨日：",n(c(),l())<0&&e.jsxs("strong",{className:"c-danger",children:[n(c(),l()),"%"]}),n(c(),l())>=0&&e.jsxs("strong",{children:[n(c(),l()),"%"]})]})]}),e.jsxs("div",{className:s.el_item,children:[e.jsxs("div",{className:s.item_title,children:[e.jsx("span",{children:"今日支付人数"}),e.jsx("span",{className:s.el_item_num,children:_(t.today_paid_user_count)})]}),e.jsxs("span",{className:s.el_item_increase,children:["昨日：",d(t.yesterday_paid_user_count)]}),e.jsxs("span",{className:s.el_item_increase,children:["较昨日：",n(t.today_paid_user_count,t.yesterday_paid_user_count)<0&&e.jsxs("strong",{className:"c-danger",children:[n(t.today_paid_user_count,t.yesterday_paid_user_count),"%"]}),n(t.today_paid_user_count,t.yesterday_paid_user_count)>=0&&e.jsxs("strong",{children:[n(t.today_paid_user_count,t.yesterday_paid_user_count),"%"]})]})]})]})]}),e.jsxs("div",{className:s.el_top_row2,children:[e.jsxs("div",{className:s.el_row_left,children:[e.jsx("div",{className:s.header,children:e.jsx("div",{className:s.item_title,children:e.jsx("span",{children:"交易过程统计"})})}),e.jsxs("div",{className:s["data-box"],children:[e.jsxs("div",{className:s["data-item"],children:[e.jsx("div",{className:s.tit,children:e.jsx("span",{children:"提交订单数"})}),e.jsx("div",{className:s.num,children:_(t.today_count)}),e.jsxs("div",{className:s["info-t"],children:["昨日：",d(t.yesterday_count)]}),e.jsxs("div",{className:s.info,children:["较昨日：",n(t.today_count,t.yesterday_count)<0&&e.jsxs("span",{className:"c-danger",children:[n(t.today_count,t.yesterday_count),"%"]}),n(t.today_count,t.yesterday_count)>=0&&e.jsxs("span",{children:[n(t.today_count,t.yesterday_count),"%"]})]})]}),e.jsx("div",{className:s["row-line"]}),e.jsxs("div",{className:s["data-item"],children:[e.jsx("div",{className:s.tit,children:e.jsx("span",{children:"支付订单数"})}),e.jsx("div",{className:s.num,children:_(t.today_paid_count)}),e.jsxs("div",{className:s["info-t"],children:["昨日：",d(t.yesterday_paid_count)]}),e.jsxs("div",{className:s.info,children:["较昨日：",n(t.today_paid_count,t.yesterday_paid_count)<0&&e.jsxs("span",{className:"c-danger",children:[n(t.today_paid_count,t.yesterday_paid_count),"%"]}),n(t.today_paid_count,t.yesterday_paid_count)>=0&&e.jsxs("span",{children:[n(t.today_paid_count,t.yesterday_paid_count),"%"]})]})]}),e.jsx("div",{className:s["row-line"]}),e.jsxs("div",{className:s["data-item"],children:[e.jsx("div",{className:s.tit,children:e.jsx("span",{children:"支付转化率"})}),e.jsxs("div",{className:s.num,children:[m(),"%"]}),e.jsxs("div",{className:s["info-t"],children:["昨日：",p(),"%"]}),e.jsxs("div",{className:s.info,children:["较昨日：",n(m(),p())<0&&e.jsxs("span",{className:"c-danger",children:[n(m(),p()),"%"]}),n(m(),p())>=0&&e.jsxs("span",{children:[n(m(),p()),"%"]})]})]})]})]}),e.jsx("div",{className:s.el_row_right,children:e.jsxs("div",{className:s.el_row_right_item,children:[e.jsxs("div",{className:s.header,children:[e.jsx("div",{className:s.item_title,children:e.jsx("span",{children:"Top5销售额"})}),e.jsx("div",{className:s.controls,children:e.jsx(S,{active:!1,onChange:(a,i)=>{G(a,i)}})})]}),e.jsxs("div",{className:s["top-list"],children:[x.length===0&&e.jsx("div",{className:s.none,children:e.jsx("span",{children:"暂无数据"})}),x.length>0&&x.map((a,i)=>e.jsxs("div",{className:s["list-item"],children:[e.jsxs("div",{className:s["list-item-name"],children:[i+1,". ",a.goods_name]}),e.jsx("div",{className:s["list-item-sum"],children:a.orders_paid_sum})]},a.goods_id))]})]})})]}),e.jsx("div",{className:s.el_top_row3,children:e.jsxs("div",{className:s.el_row_item,children:[e.jsxs("div",{className:s.header,children:[e.jsx("div",{className:s.title,children:e.jsx("span",{children:"交易分析"})}),e.jsx("div",{className:s.controls,children:e.jsx(S,{active:!0,onChange:(a,i)=>{b(a,i)}})})]}),e.jsx("div",{className:s.charts,children:e.jsx("div",{ref:f,style:{width:"100%",height:280,marginLeft:-30,position:"relative"}})})]})})]})})};export{ge as default};
