import{r as t,j as e,B as w,M as I,m as E,bQ as a}from"./index-b4683d61.js";import{i as L}from"./InboxOutlined-1c6772bb.js";import{U as R,s as U}from"./selected-177ec16c.js";import{R as z,C as i}from"./row-4ee18533.js";import{E as M}from"./useIcons-e0af7133.js";import{P as B}from"./Pagination-d2c763c6.js";const H=o=>{const[r,c]=t.useState(!1),[n,f]=t.useState(0),[m,g]=t.useState([]),[h,j]=t.useState(!1),[d,u]=t.useState(1),[x,p]=t.useState(15),[y,k]=t.useState(0),[l,S]=t.useState(""),v=[{key:0,name:"全部图片"},{key:1,name:"幻灯片"},{key:2,name:"课程封面"},{key:3,name:"课程详情页"},{key:4,name:"文章配图"}],C=()=>{L({page:d,size:x,from:n}).then(s=>{k(s.data.data.total),g(s.data.data.data)}).catch(s=>{console.log("错误,",s)})},N=()=>{u(1),g([]),j(!h)};return t.useEffect(()=>{r&&C()},[n,h,d,x,r]),e.jsxs(e.Fragment,{children:[e.jsx(w,{onClick:()=>{c(!0)},children:o.text?o.text:"上传图片"}),r?e.jsx(I,{title:"选择图片",closable:!1,onCancel:()=>{c(!1)},open:!0,width:881,maskClosable:!1,onOk:()=>{if(!l){E.error("请选择图片后确定");return}o.onSelected(l),c(!1)},centered:!0,children:e.jsxs(z,{style:{width:830,minHeight:520,marginTop:24},children:[e.jsx("div",{style:{position:"absolute",right:30,top:15,zIndex:15},children:e.jsx(R,{from:n,onUpdate:()=>{N()}})}),e.jsx(i,{span:5,children:e.jsx("div",{className:a["category-box"],children:v.map(s=>e.jsx("div",{className:s.key===n?a["category-act-item"]:a["category-item"],onClick:()=>f(s.key),children:s.name},s.key))})}),e.jsxs(i,{span:19,children:[m.length===0&&e.jsx(i,{span:24,children:e.jsx(M,{description:"暂无图片"})}),e.jsx("div",{className:a["image-list-box"],children:m.map(s=>e.jsxs("div",{className:l.indexOf(s.url)!==-1?a["image-active-item"]:a["image-item"],onClick:()=>{S(s.url)},children:[l.indexOf(s.url)!==-1&&e.jsx("div",{className:a.sel,children:e.jsx("img",{src:U})}),e.jsx("div",{className:a["image-render"],children:e.jsx("div",{className:a["image-view"],style:{backgroundImage:`url(${s.url})`}})}),e.jsx("div",{className:a["image-name"],children:e.jsx("div",{className:a.name,children:s.name})})]},s.id))}),m.length>0&&e.jsx(i,{span:24,style:{display:"flex",flexDirection:"row-reverse",marginTop:30},children:e.jsx(B,{onChange:(s,b)=>{u(s),p(b)},pageSize:x,defaultCurrent:d,total:y})})]})]})}):null]})};export{H as U};
