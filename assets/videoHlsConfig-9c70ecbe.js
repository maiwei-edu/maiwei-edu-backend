import{u as H,b as j,f as k,r as m,a as A,t as C,cx as _,j as e,g as w,I as r,B as f,cy as F,m as S}from"./index-3fd54424.js";import{B as T}from"./index-c3c15456.js";import{F as d}from"./index-0ca68444.js";import{S as h}from"./index-ff4e3b6e.js";import"./LeftOutlined-a0f8cfa6.js";import"./row-98a37fbf.js";import"./responsiveObserver-a0dea2e5.js";import"./useIcons-235bc0cd.js";import"./CheckOutlined-44e74bd9.js";const E=()=>{const p=H(),u=j(),[n]=d.useForm(),c=new URLSearchParams(k().search),[t,i]=m.useState(!0),o=A(a=>a.enabledAddonsConfig.value.enabledAddons),y=[{label:"亚太东南(曼谷)",value:"ap-bangkok"},{label:"华北地区(北京)",value:"ap-beijing"},{label:"西南地区(成都)",value:"ap-chengdu"},{label:"西南地区(重庆)",value:"ap-chongqing"},{label:"华南地区(广州)",value:"ap-guangzhou"},{label:"港澳台地区(中国香港)",value:"ap-hongkong"},{label:"亚太南部(孟买)",value:"ap-mumbai"},{label:"亚太东北(首尔)",value:"ap-seoul"},{label:"华东地区(上海)",value:"ap-shanghai"},{label:"华东地区(上海金融)",value:"ap-shanghai-fsi"},{label:"华南地区(深圳金融)",value:"ap-shenzhen-fsi"},{label:"亚太东南(新加坡)",value:"ap-singapore"},{label:"亚太东北(东京)",value:"ap-tokyo"},{label:"欧洲地区(法兰克福)",value:"eu-frankfurt"},{label:"欧洲地区(莫斯科)",value:"eu-moscow"},{label:"美国东部(弗吉尼亚)",value:"na-ashburn"},{label:"美国西部(硅谷)",value:"na-siliconvalley"},{label:"北美地区(多伦多)",value:"na-toronto"}],g=[{label:"流畅",value:"210"},{label:"标清",value:"220"},{label:"高清",value:"230"},{label:"超清",value:"240"},{label:"2K",value:"270"},{label:"4K",value:"280"}];m.useEffect(()=>{document.title="视频加密",p(C("视频加密")),b()},[]);const b=()=>{_().then(a=>{if(o.AliyunHls===1){let l=a.data.阿里云HLS加密;for(let s in l)l[s].key==="meedu.addons.AliyunHls.region"?n.setFieldsValue({"meedu.addons.AliyunHls.region":l[s].value}):l[s].key==="meedu.addons.AliyunHls.template_id"?n.setFieldsValue({"meedu.addons.AliyunHls.template_id":l[s].value}):l[s].key==="meedu.addons.AliyunHls.access_key"?n.setFieldsValue({"meedu.addons.AliyunHls.access_key":l[s].value}):l[s].key==="meedu.addons.AliyunHls.access_secret"?n.setFieldsValue({"meedu.addons.AliyunHls.access_secret":l[s].value}):l[s].key==="meedu.addons.AliyunHls.kms_region"?n.setFieldsValue({"meedu.addons.AliyunHls.kms_region":l[s].value}):l[s].key==="meedu.addons.AliyunHls.kms_key_id"&&n.setFieldsValue({"meedu.addons.AliyunHls.kms_key_id":l[s].value})}if(o.TencentCloudHls===1){let l=a.data.腾讯云HLS加密;for(let s in l)l[s].key==="meedu.addons.TencentCloudHls.region"?n.setFieldsValue({"meedu.addons.TencentCloudHls.region":l[s].value}):l[s].key==="meedu.addons.TencentCloudHls.transcode_definition"&&l[s].value&&l[s].value.length>0&&n.setFieldsValue({"meedu.addons.TencentCloudHls.transcode_definition":l[s].value.split(",")})}i(!1)}).catch(a=>{i(!1)})},v=a=>{t||(a["meedu.addons.TencentCloudHls.transcode_definition"]&&(a["meedu.addons.TencentCloudHls.transcode_definition"]=a["meedu.addons.TencentCloudHls.transcode_definition"].join(",")),a["meedu.addons.AliyunHls.kms_region"]=a["meedu.addons.AliyunHls.region"],i(!0),F({config:a}).then(l=>{i(!1),S.success("成功！"),c.get("referer")?u(String(c.get("referer")),{replace:!0}):u(-1)}).catch(l=>{i(!1)}))},x=a=>{console.log("Failed:",a)};return e.jsxs("div",{className:"meedu-main-body",children:[e.jsx(T,{title:"视频加密"}),t&&e.jsx("div",{style:{width:"100%",textAlign:"center",paddingTop:50,paddingBottom:30,boxSizing:"border-box"},children:e.jsx(w,{})}),!t&&e.jsx("div",{className:"float-left",children:e.jsxs(d,{form:n,name:"system-videoHls-config",labelCol:{span:3},wrapperCol:{span:21},initialValues:{remember:!0},onFinish:v,onFinishFailed:x,autoComplete:"off",children:[o.AliyunHls===1&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"from-title mt-30",children:"阿里云HLS加密"}),e.jsxs(d.Item,{label:"视频转码模板ID",name:"meedu.addons.AliyunHls.template_id",children:[e.jsx(d.Item,{name:"meedu.addons.AliyunHls.template_id",children:e.jsx(r,{style:{width:300},allowClear:!0})}),e.jsx("div",{className:"form-helper-text",children:e.jsx("span",{children:"配置教程地址：https://www.yuque.com/meedu/fvvkbf/xdqeeb"})})]}),e.jsx(d.Item,{label:"AccessKeyId",name:"meedu.addons.AliyunHls.access_key",children:e.jsx(r,{style:{width:300},allowClear:!0})}),e.jsx(d.Item,{label:"AccessKeySecret",name:"meedu.addons.AliyunHls.access_secret",children:e.jsx(r,{style:{width:300},allowClear:!0})})]}),o.TencentCloudHls===1&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"from-title mt-30",children:"腾讯云HLS加密"}),e.jsxs(d.Item,{label:"腾讯云视频存储region",name:"meedu.addons.TencentCloudHls.region",children:[e.jsx(d.Item,{name:"meedu.addons.TencentCloudHls.region",children:e.jsx(h,{style:{width:300},allowClear:!0,options:y})}),e.jsx("div",{className:"form-helper-text",children:e.jsx("span",{children:"配置教程：https://www.yuque.com/meedu/ww4uyo/umxey1"})})]}),e.jsx(d.Item,{label:"清晰度(多个请用英文逗号连接)",name:"meedu.addons.TencentCloudHls.transcode_definition",children:e.jsx(h,{mode:"multiple",style:{width:300},allowClear:!0,options:g,placeholder:"请选择"})})]})]})}),e.jsx("div",{className:"bottom-menus",children:e.jsxs("div",{className:"bottom-menus-box",children:[e.jsx("div",{children:e.jsx(f,{loading:t,type:"primary",onClick:()=>n.submit(),children:"保存"})}),e.jsx("div",{className:"ml-24",children:e.jsx(f,{type:"default",onClick:()=>u(-1),children:"取消"})})]})})]})};export{E as default};
