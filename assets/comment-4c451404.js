import{u as z,r as a,t as A,j as e,B as g,m as j,E as F,d as Y,h as I,M as K}from"./index-b4683d61.js";import{o as H,p as O}from"./live-ef2dd82c.js";import{B as U}from"./index-5f967da4.js";import{P as Z}from"./index-573a6ce5.js";import{T as q}from"./Table-76e623b5.js";import{D as G}from"./index-cc7d88a3.js";import"./LeftOutlined-9e6e73a2.js";import"./addEventListener-a27ae3f4.js";import"./useIcons-e0af7133.js";import"./CheckOutlined-e6bc730e.js";import"./Pagination-d2c763c6.js";import"./useForceUpdate-f2aff5e0.js";import"./responsiveObserver-dc429d3b.js";import"./index-c09cc6d7.js";import"./index-10f1a096.js";import"./iconUtil-f3f90360.js";const{confirm:J}=K,{RangePicker:Q}=G,ue=()=>{const S=z(),[i,n]=a.useState(!1),[C,c]=a.useState([]),[l,o]=a.useState(1),[d,p]=a.useState(10),[v,y]=a.useState(0),[r,m]=a.useState(!1),[k,N]=a.useState(""),[_,x]=a.useState([]),[w,f]=a.useState([]),[u,h]=a.useState([]);a.useEffect(()=>{document.title="直播课程评论",S(A("直播课程评论"))},[]),a.useEffect(()=>{D()},[l,d,r]);const D=()=>{i||(n(!0),H({page:l,size:d,user_id:k,course_id:null,created_at:_}).then(t=>{c(t.data.data.data),y(t.data.data.total),n(!1)}).catch(t=>{n(!1)}))},b=()=>{if(u.length===0){j.error("请选择需要操作的数据");return}J({title:"操作确认",icon:e.jsx(F,{}),content:"确认删除选中的评论？",centered:!0,okText:"确认",cancelText:"取消",onOk(){i||(n(!0),O({ids:u}).then(()=>{n(!1),j.success("成功"),M()}).catch(t=>{n(!1)}))},onCancel(){console.log("Cancel")}})},P=()=>{o(1),p(10),c([]),h([]),N(""),f([]),x([]),m(!r)},M=()=>{o(1),c([]),h([]),m(!r)},B={current:l,pageSize:d,total:v,onChange:(t,s)=>E(t,s),showSizeChanger:!0},E=(t,s)=>{o(t),p(s)},L=[{title:"学员",width:300,render:(t,s)=>e.jsxs(e.Fragment,{children:[s.user&&e.jsxs("div",{className:"user-item d-flex",children:[e.jsx("div",{className:"avatar",children:e.jsx("img",{src:s.user.avatar,width:"40",height:"40"})}),e.jsx("div",{className:"ml-10",children:s.user.nick_name})]}),!s.user&&e.jsx("span",{className:"c-red",children:"学员不存在"})]})},{title:"课程",render:(t,s)=>e.jsx(e.Fragment,{children:s.course&&e.jsx("span",{children:s.course.title})})},{title:"内容",render:(t,s)=>e.jsx("div",{dangerouslySetInnerHTML:{__html:s.content}})},{title:"时间",width:200,dataIndex:"created_at",render:t=>e.jsx("span",{children:Y(t)})}],R={selectedRowKeys:u,onChange:(t,s)=>{h(t)}},T=t=>t&&t>=I().add(0,"days");return e.jsxs("div",{className:"meedu-main-body",children:[e.jsx(U,{title:"直播课程评论"}),e.jsxs("div",{className:"float-left j-b-flex mb-30 mt-30",children:[e.jsx("div",{className:"d-flex",children:e.jsx(Z,{type:"danger",text:"删除",class:"",icon:null,p:"addons.Zhibo.course_comment.delete.multi",onClick:()=>b(),disabled:null})}),e.jsxs("div",{className:"d-flex",children:[e.jsx(Q,{disabledDate:T,format:"YYYY-MM-DD",value:w,style:{marginLeft:10},onChange:(t,s)=>{s[1]+=" 23:59:59",x(s),f(t)},placeholder:["评论时间-开始","评论时间-结束"]}),e.jsx(g,{className:"ml-10",onClick:P,children:"清空"}),e.jsx(g,{className:"ml-10",type:"primary",onClick:()=>{o(1),m(!r)},children:"筛选"})]})]}),e.jsx("div",{className:"float-left",children:e.jsx(q,{rowSelection:{type:"checkbox",...R},loading:i,columns:L,dataSource:C,rowKey:t=>t.id,pagination:B})})]})};export{ue as default};
